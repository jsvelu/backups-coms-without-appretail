webpackJsonp([14],{0:function(r,e,n){r.exports=n(169)},120:function(r,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(r){r.controller("EditQuoteController",["$scope","$http","$location","ApiService",function(r,e,n,s){r.post=function(r){return s.post("edit_quote/",r)},r.table_object=null,r.customer_type="Customer",r.caravan_selection="base",r.choices={series_list:[]},r.data={},r.customer_form={},r.order={physical_add:{owner:"",street:"",postcode:"",state:"",suburb:""},delivery_add:{name:"",street:"",postcode:"",state:"",suburb:""},invoice_add:{name:"",street:"",postcode:"",state:"",suburb:""},customer:{partner_name:""}},r.active_sub_tab=[!0,!1,!1,!1,!1,!1],r.order.desired_dd_day=1,r.order.desired_dd_month=2,r.order.desired_dd_year=2016,r.info={show_price:!0,show_price_button:"Hide"},r.days=[],r.months=[],r.years=[];for(var t=new Date,a=1;a<=31;a++)r.days.push(a);for(var o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=0;i<12;i++)r.months.push([i,o[i]]);for(var l=0;l<=20;l++)r.years.push(t.getFullYear()+l);var d=$("<a>",{href:n.absUrl()})[0],c=d.search.substr(1).split("=")[1];r.post({type:"get_edit_pre_data",quote_id:c}).then(function(e){r.choices.dealerships=e.data.list.dealers,r.choices.states=e.data.list.states,r.choices.models=e.data.list.models,r.choices.series_list=e.data.list.series_list,r.data.categories=e.data.list.categories,r.data.availability_types=e.data.list.availability_types,r.data.series=e.data.list.series,r.quote=e.data.list.quote,r.quote.upgrade_retail_sum=0,r.quote.upgrade_wholesale_sum=0,r.quote.upgrade_cost_sum=0,r.quote.extra_retail_sum=0,r.quote.extra_wholesale_sum=0,r.quote.extra_cost_sum=0,r.quote.special_features_retail_sum=0}),r.on_base_series_selection=function(){r.post({type:"set_series",series_id:r.quote.series,quote_id:r.quote.id}).then(function(e){r.active_sub_tab[2]=!0})},r.toggleShowPrice=function(){r.info.show_price=!r.info.show_price,r.info.show_price?r.info.show_price_button="Hide":r.info.show_price_button="Show Retail Price"},r.OnSKUClick=function(e,n){e.selected_item=n;var s=e.retail_price_differential,t=e.wholesale_price_differential,a=e.cost_price_differential;e.retail_price_differential=n.retail_price-e.standard_item.retail_price,e.wholesale_price_differential=n.wholesale_price-e.standard_item.wholesale_price,e.cost_price_differential=n.cost_price-e.standard_item.cost_price,r.quote.upgrade_retail_sum+=e.retail_price_differential-s,r.quote.upgrade_wholesale_sum+=e.wholesale_price_differential-t,r.quote.upgrade_cost_sum+=e.cost_price_differential-a},r.UpdateFeaturesTotals=function(r,e){},r.extra_checked=function(e,n,s){s.is_selected=!s.is_selected;var t;s.is_selected?(t=1,n.selected_extra_count++,e.sub_selected_extra_count++):(e.sub_selected_extra_count--,n.selected_extra_count--,t=-1),r.quote.extra_retail_sum+=s.retail_price*t,r.quote.extra_wholesale_sum-=s.wholesale_price*t,r.quote.extra_cost_sum-=s.cost_price*t},r.onAddExtra=function(e){r.data.category_for_extra=e,$("#extra_modal").modal({backdrop:"static",keyboard:!1})},r.onOpenSeriesPhotos=function(){$("#photos.modal").modal({backdrop:"static"})},r.onShowFeaturedTotals=function(){$("#featured_totals_modal").modal({backdrop:"static",keyboard:!1})},r.onAddExtraSubmit=function(){$(".modal").modal("hide")};r.search=function(e){r.search_id=e.id,r.table_object.ajax.reload()},r.select_physical_suburb=function(e){r.order.physical_add.suburb=e.suburb,r.order.physical_add.postcode=e.postcode,r.order.physical_add.state=e.state_id},r.select_delivery_suburb=function(e){r.order.delivery_add.suburb=e.suburb,r.order.delivery_add.postcode=e.postcode,r.order.delivery_add.state=e.state_id},r.select_invoice_suburb=function(e){r.order.invoice_add.suburb=e.suburb,r.order.invoice_add.postcode=e.postcode,r.order.invoice_add.state=e.state_id},r.on_model_select=function(e){r.post({type:"get_model_series",model_id:r.quote.model}).then(function(e){r.quote.model_obj=null,r.quote.series_obj=null,r.get_model_name(),r.get_series_name(),r.choices.series_list=e.data.list.series_list})},r.on_series_select=function(){r.post({type:"get_series_data",series_id:r.quote.series,quote_id:r.quote.id}).then(function(e){r.quote.series_obj=null,r.get_series_name(),r.data.series=e.data.list.series,r.data.categories=e.data.list.categories})},r.get_model_name=function(){if(r.quote&&r.quote.model_obj)return r.quote.model_obj.title;if("undefined"==typeof r.choices.models)return"";var e;for(e=0;e<r.choices.models.length;++e)if(r.choices.models[e].id==r.quote.model)return r.quote.model_obj=r.choices.models[e],r.choices.models[e].title},r.get_series_name=function(){if(r.quote&&r.quote.series_obj)return r.quote.series_obj.title;var e;for(e=0;e<r.choices.series_list.length;++e)if(r.choices.series_list[e].id==r.quote.series)return r.quote.series_obj=r.choices.series_list[e],r.choices.series_list[e].title;return""},r.add_special_row=function(r){r.additional_expenses.push({id:"",category_id:"",notes:"",quantity:"",retail_charge:"",wholesale_charge:"",cost_price:"",approval_time:"",approval_notes:""})},r.should_feature_price_be_disabled=function(r){return""==r.category_id||""==r.notes||""==r.quantity},r.on_special_feature_price_change=function(e){void 0===e.previous_retail_charge&&(e.previous_retail_charge=0),r.quote.special_features_retail_sum+=parseInt(e.retail_charge)-e.previous_retail_charge,e.previous_retail_charge=parseInt(e.retail_charge)},r.update_customer_details=function(e){e.$valid&&r.post({type:"add_customer_quote",data:r.order}).then(function(e){"fail"===e.data.result?(r.order.insert_successful_message="",r.order.insert_failed_message=e.data.message):(r.order.insert_failed_message="",r.order.insert_successful_message=e.data.message)})}}])},r.exports=e.default},169:function(r,e,n){"use strict";var s=n(10);n(120)(s),s.config(["$stateProvider",function(r){r.state("edit_quote",{url:"",template:n(283),controller:"EditQuoteController"})}])},283:function(r,e){r.exports='<top-bar>\r\n    <h2>Edit Quote</h2>\r\n    <div class="row top-bar-info">\r\n        <div class="col-sm-2" ng-if="current_dealership()">\r\n            <h5>Dealership</h5>\r\n            <h4>{{ current_dealership().title }}</h4>\r\n        </div>\r\n        <div class="col-sm-6" ng-if="quote.model && quote.series">\r\n            <h4><small>Model: </small>\r\n            {{ get_model_name() }}</h4>\r\n            {{ get_series_name() }}\r\n        </div>\r\n    </div>\r\n</top-bar>\r\n\r\n<div class="container">\r\n    <div class="row" ng-if="customer_type==\'Dealership\'">\r\n        <div class="col-sm-12">\r\n\r\n            <form name="stock_form" class="form top-margin-30">\r\n                <div class="panel panel-primary" id="panels">\r\n                    <div class="panel-heading">Create a stock order</div>\r\n                    <div class="panel-body">\r\n                            <div class="col-sm-6">\r\n                                <label class="form-label">DEALERSHIP</label>\r\n                                <select class="form-control"\r\n                                        ng-model="quote.dealer_dealership"\r\n                                        ng-options="dealer.id as dealer.title for dealer in choices.dealerships"\r\n                                        required>\r\n                                    <option value="">Select a dealership</option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div class="col-sm-6">\r\n                                <label class="form-label">DESIRED DELIVERY DATE</label>\r\n                                <date-dropdowns></date-dropdowns>\r\n                            </div>\r\n                    </div>\r\n                </div>\r\n                <div class="form-group col-sm-3">\r\n                    <button type="submit" class="btn btn-primary form-control" ng-click="proceed(stock_form)">Create and proceed</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n    <div class="row" ng-if="customer_type==\'Customer\'">\r\n        <div class="col-sm-12">\r\n            <div>\r\n                <tabset justified="false">\r\n                    <tab heading="Customer Details">\r\n                        <form name="customer_form" novalidate class="form top-margin-30" autocomplete="off" form-autofill-fix ng-submit="update_customer_details(customer_form)">\r\n                            <div class="panel panel-default">\r\n                                <div class="panel-body">\r\n                                    <div class="row">\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">DEALERSHIP</label>\r\n                                            <select class="form-control"\r\n                                                    ng-model="quote.customer_dealership"\r\n                                                    ng-options="dealer.id as dealer.title for dealer in choices.dealerships">\r\n                                                <option value="">Select a dealership (optional)</option>\r\n                                            </select>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <!-- Customer details -->\r\n\r\n                                    <div class="row top-margin-40">\r\n                                        <div class="col-sm-6"><h4>Customer Details</h4></div>\r\n                                        <div class="col-sm-6">\r\n                                            <button class="btn btn-default pull-right">Retrieve customer from leads</button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="row top-margin-30">\r\n                                        <div class="col-sm-6"><i>Fields marked with an asterisk are required</i></div>\r\n                                    </div>\r\n\r\n                                    <div class="row top-margin-20">\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">\r\n                                                <red-star></red-star>\r\n                                                FIRST NAME</label>\r\n                                            <input type="text" class="form-control" ng-model="quote.customer.first_name" name="first_name" required/>\r\n                                            <required-field form="customer_form" name="customer_form.first_name" label="First Name"></required-field>\r\n                                        </div>\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">\r\n                                                <red-star></red-star>\r\n                                                LAST NAME</label>\r\n                                            <input type="text" class="form-control" ng-model="quote.customer.last_name" name="last_name" required/>\r\n                                            <required-field form="customer_form" name="customer_form.last_name" label="Last Name"></required-field>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="row top-margin-20">\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">\r\n                                                <red-star></red-star>\r\n                                                EMAIL</label>\r\n                                            <input type="text" class="form-control" ng-model="quote.customer.email" name="email" required/>\r\n                                            <required-field form="customer_form" name="customer_form.email" label="Email Address"></required-field>\r\n                                        </div>\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">PARTNER\'S NAME</label>\r\n                                            <input type="text" class="form-control" ng-model="quote.customer.partner_name" name="partner_name" />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="row top-margin-20">\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">\r\n                                                <red-star></red-star>\r\n                                                PHONE NUMBER</label>\r\n                                            <input type="text" class="form-control" ng-model="quote.customer.phone_number" name="phone_number" required/>\r\n                                            <required-field form="customer_form" name="customer_form.phone_number" label="Phone Number"></required-field>\r\n                                        </div>\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">DESIRED DELIVERY DATE</label>\r\n                                            <div class="date-dropdowns">\r\n                                                <select class="form-control"\r\n                                                        ng-model="quote.desired_dd_day"\r\n                                                        ng-options="day as day for day in days">\r\n                                                    <option value="">dd</option>\r\n                                                </select>\r\n                                                <select class="form-control"\r\n                                                        ng-model="quote.desired_dd_month"\r\n                                                        ng-options="month[0] as month[1] for month in months">\r\n                                                    <option value="">mm</option>\r\n                                                </select>\r\n                                                <select class="form-control"\r\n                                                        ng-model="quote.desired_dd_year"\r\n                                                        ng-options="year as year for year in years">\r\n                                                    <option value="">yyyy</option>\r\n                                                </select>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n\r\n                                    <!-- Address -->\r\n\r\n\r\n                                    <div class="row top-margin-40">\r\n                                        <div class="col-sm-6"><h4>Address</h4></div>\r\n                                    </div>\r\n\r\n                                    <div class="row top-margin-20">\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">\r\n                                                <red-star></red-star>\r\n                                                REGISTERED OWNER</label>\r\n                                            <input type="text" ng-model="quote.physical_add.owner" name="physical_add_owner" class="form-control" required/>\r\n                                            <required-field form="customer_form" name="customer_form.physical_add_owner" label="Registered Owner"></required-field>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="row top-margin-20">\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">\r\n                                                <red-star></red-star>\r\n                                                STREET ADDRESS</label>\r\n                                            <input type="text" ng-model="quote.physical_add.street" name="physical_add_street" class="form-control" required/>\r\n                                            <required-field form="customer_form" name="customer_form.physical_add_street" label="Street Address"></required-field>\r\n                                        </div>\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">\r\n                                                LOOKUP CITY OR SUBURB</label>\r\n                                            <lookup result="search.physical_suburb"\r\n                                                    on-select="select_physical_suburb" type="suburb_lookup" name="physical_add_suburb" autocomplete="off" required></lookup>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="row top-margin-20">\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">\r\n                                                <red-star></red-star>\r\n                                                CITY / SUBURB</label>\r\n                                            <input type="text"  ng-model="quote.physical_add.suburb" name="physical_add_suburb" class="form-control" required/>\r\n                                            <required-field form="customer_form" name="customer_form.physical_add_suburb" label="City / Suburb"></required-field>\r\n                                        </div>\r\n                                        <div class="form-group col-sm-4">\r\n                                            <label class="form-label">\r\n                                                <red-star></red-star>\r\n                                                POSTCODE</label>\r\n                                            <input type="text" ng-model="quote.physical_add.postcode" name="physical_add_postcode" class="form-control" required/>\r\n                                            <required-field form="customer_form" name="customer_form.physical_add_postcode" label="Postcode"></required-field>\r\n                                        </div>\r\n                                        <div class="form-group col-sm-2">\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div class="row top-margin-20">\r\n                                        <div class="form-group col-sm-6">\r\n                                            <label class="form-label">\r\n                                                <red-star></red-star>\r\n                                                STATE</label>\r\n                                            <select  class="form-control"\r\n                                                    ng-model="quote.physical_add.state" name="physical_add_state"\r\n                                                    ng-options="state.id as state.title for state in choices.states" required>\r\n                                                <option value="">Select a state</option>\r\n                                            </select>\r\n                                            <required-field form="customer_form" name="customer_form.physical_add_state" label="State"></required-field>\r\n                                        </div>\r\n\r\n                                    </div>\r\n\r\n                                    <div class="row top-margin-40">\r\n\r\n                                        <accordion class="red" close-others="false">\r\n\r\n                                            <!-- Delivery -->\r\n\r\n                                            <accordion-group>\r\n                                                <accordion-heading>\r\n                                                    <div>Delivery details (if different)</div>\r\n                                                </accordion-heading>\r\n\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">NAME</label>\r\n                                                        <input type="text" ng-model="quote.delivery_add.name" class="form-control"/>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">STREET ADDRESS</label>\r\n                                                        <input type="text" ng-model="quote.delivery_add.street" class="form-control"/>\r\n                                                    </div>\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">LOOKUP CITY OR SUBURB</label>\r\n                                                        <lookup result="search.delivery_suburb"\r\n                                                            on-select="select_delivery_suburb" type="suburb_lookup" autocomplete="off"></lookup>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">\r\n                                                            CITY / SUBURB</label>\r\n                                                        <input type="text"  ng-model="quote.delivery_add.suburb" name="delivery_add_suburb" class="form-control"/>\r\n                                                    </div>\r\n                                                    <div class="form-group col-sm-4">\r\n                                                        <label class="form-label">POSTCODE</label>\r\n                                                        <input type="text" ng-model="quote.delivery_add.postcode" class="form-control"/>\r\n                                                    </div>\r\n                                                    <div class="form-group col-sm-2">\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">STATE</label>\r\n                                                        <select  class="form-control"\r\n                                                                ng-model="quote.delivery_add.state"\r\n                                                                ng-options="state.id as state.title for state in choices.states">\r\n                                                            <option value="">Select a state</option>\r\n                                                        </select>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                            </accordion-group>\r\n\r\n\r\n                                            <!-- Invoice -->\r\n\r\n                                            <accordion-group>\r\n                                                <accordion-heading>\r\n                                                    <div>Invoice details (if different)</div>\r\n                                                </accordion-heading>\r\n\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">NAME</label>\r\n                                                        <input type="text" ng-model="quote.invoice_add.name" class="form-control"/>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">STREET ADDRESS</label>\r\n                                                        <input type="text" ng-model="quote.invoice_add.street" class="form-control"/>\r\n                                                    </div>\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">LOOKUP CITY OR SUBURB</label>\r\n                                                        <lookup result="search.invoice_suburb"\r\n                                                            on-select="select_invoice_suburb" type="suburb_lookup" autocomplete="off"></lookup>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">\r\n                                                            CITY / SUBURB</label>\r\n                                                        <input type="text"  ng-model="quote.invoice_add.suburb" name="invoice_add_suburb" class="form-control"/>\r\n                                                    </div>\r\n                                                    <div class="form-group col-sm-4">\r\n                                                        <label class="form-label">POSTCODE</label>\r\n                                                        <input type="text" ng-model="quote.invoice_add.postcode" class="form-control"/>\r\n                                                    </div>\r\n                                                    <div class="form-group col-sm-2"></div>\r\n                                                </div>\r\n\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">STATE</label>\r\n                                                        <select  class="form-control"\r\n                                                                ng-model="quote.invoice_add.state"\r\n                                                                ng-options="state.id as state.title for state in choices.states">\r\n                                                            <option value="">Select a state</option>\r\n                                                        </select>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                            </accordion-group>\r\n                                        </accordion>\r\n\r\n                                    </div>\r\n                                    <div class="row top-margin-20">\r\n                                        <div class="form-group col-sm-3">\r\n                                            <button type="submit" class="btn btn-primary form-control" data-ng-disabled="progress.active()">Update and proceed</button>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="row">\r\n                                        <div class="alert alert-success" ng-if="quote.update_successful_message">{{ quote.update_successful_message }}</div>\r\n                                        <div class="alert alert-danger" ng-if="quote.update_failed_message">{{ quote.update_failed_message }}</div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </tab>\r\n                    <tab heading="Caravan Details">\r\n                        <div class="panel panel-default">\r\n                            <div class="panel-body" style="padding-top:60px;">\r\n                                <tabset justified="false">\r\n                                    <tab id="sub_tab_model_series" heading="Model & Series">\r\n                                        <div class="radio">\r\n                                          <label>\r\n                                            <input type="radio" ng-model="caravan_selection" value="base">\r\n                                            Select from Base Model and Series\r\n                                          </label>\r\n                                        </div>\r\n                                        <div class="radio">\r\n                                          <label>\r\n                                            <input type="radio" ng-model="caravan_selection" value="previous">\r\n                                            Select a previous Customer / Stock Model\r\n                                          </label>\r\n                                        </div>\r\n                                        <div ng-if="caravan_selection==\'base\'">\r\n                                            <form name="model_series_form" novalidate class="form top-margin-30" autocomplete="off" form-autofill-fix ng-submit="assign_model_series(model_series_form)">\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">Model</label>\r\n                                                        <select  class="form-control"\r\n                                                                ng-model="quote.model" name="model"\r\n                                                                ng-options="model.id as model.title for model in choices.models" ng-change="on_model_select(quote.model)">\r\n                                                            <option value="">Select a model</option>\r\n                                                        </select>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-6">\r\n                                                        <label class="form-label">Series</label>\r\n                                                        <select  class="form-control"\r\n                                                                ng-model="quote.series" name="series"\r\n                                                                ng-options="series.id as series.title for series in choices.series_list" ng-change="on_series_select()">\r\n                                                            <option value="">Select a series</option>\r\n                                                        </select>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-3">\r\n                                                        <button type="submit" class="btn btn-primary form-control" ng-click="on_base_series_selection()" data-ng-disabled="progress.active()">Update and proceed</button>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row">\r\n                                                    <div class="alert alert-success" ng-if="quote.update_successful_message">{{ quote.update_successful_message }}</div>\r\n                                                    <div class="alert alert-danger" ng-if="quote.update_failed_message">{{ quote.update_failed_message }}</div>\r\n                                                </div>\r\n                                            </form>\r\n                                        </div>\r\n                                        <div ng-if="caravan_selection==\'previous\'">\r\n                                            <form name="assign_qo_form" novalidate class="form top-margin-30" autocomplete="off" form-autofill-fix ng-submit="quote_from_previous(assign_qo_form)">\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-9">\r\n                                                        <lookup result="search.text" placeholder="Search by Customer Name or Chassis Number" on-select="search_quote_or_order"\r\n                                                            type="quote_or_order_lookup" autocomplete="off"></lookup>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-3">\r\n                                                        <button type="submit" class="btn btn-primary form-control" data-ng-disabled="progress.active()">Update and proceed</button>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row">\r\n                                                    <div class="alert alert-success" ng-if="quote.update_successful_message">{{ quote.update_successful_message }}</div>\r\n                                                    <div class="alert alert-danger" ng-if="quote.update_failed_message">{{ quote.update_failed_message }}</div>\r\n                                                </div>\r\n                                            </form>\r\n                                        </div>\r\n                                    </tab>\r\n                                    <tab id="sub_tab_weight_size" heading="Weight & Size">\r\n                                        <form name="assign_qo_form" novalidate class="form top-margin-30" autocomplete="off" form-autofill-fix ng-submit="quote_from_previous(assign_qo_form)">\r\n                                                <div class="row">\r\n                                                    <div class="form-group col-sm-12">\r\n                                                        <h3>Estimated Size</h3>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row">\r\n                                                    <div class="form-group col-sm-12">\r\n                                                        {{ data.series.length_feet }}&#39;&nbsp;{{ data.series.length_inches }}&#34;&nbsp;X&nbsp;{{ data.series.width_feet }}&#39;&nbsp;{{ data.series.width_inches }}&#34;\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row">\r\n                                                    <div class="form-group col-sm-12">\r\n                                                        <h3>Estimated Weight</h3>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row">\r\n                                                    <div class="form-group col-sm-12">\r\n                                                        Tare Weight: {{ data.series.tare_weight }} KG, Ball Weight: {{ data.series.ball_weight }} KG\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row">\r\n                                                    <div class="form-group col-sm-12 checkbox">\r\n                                                        <label>\r\n                                                          <input type="checkbox" ng-model="quote.weight_understood_as_estimate">\r\n                                                          I understand that the weight provided above is an estimate only and that the final weight will depend on the Customer\'s final specifications\r\n                                                        </label>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row">\r\n                                                    <div class="form-group col-sm-12">\r\n                                                        <h4>Specify weight limits for this caravan</h4>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row">\r\n                                                    <div class="form-group col-sm-12">\r\n                                                        Some owners are limited by the towing capacity of their vehicle.\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="form-group row">\r\n                                                    <div class="col-sm-2">\r\n                                                        <div class="form-value">\r\n                                                            <input placeholder="Tare Weight (KG)"\r\n                                                                   ng-model="clone.tare_weight"\r\n                                                                   type="text" class="form-control">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                    <div class="col-sm-2">\r\n                                                        <div class="form-value">\r\n                                                            <input placeholder="Ball Weight (KG)"\r\n                                                                   ng-model="clone.ball_weight"\r\n                                                                   type="text" class="form-control">\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row top-margin-20">\r\n                                                    <div class="form-group col-sm-3">\r\n                                                        <button type="submit" class="btn btn-primary form-control" data-ng-disabled="!quote.weight_understood_as_estimate">Update and proceed</button>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row">\r\n                                                    <div class="alert alert-success" ng-if="quote.update_successful_message">{{ quote.update_successful_message }}</div>\r\n                                                    <div class="alert alert-danger" ng-if="quote.update_failed_message">{{ quote.update_failed_message }}</div>\r\n                                                </div>\r\n                                            </form>\r\n                                    </tab>\r\n                                    <tab id="sub_tab_features" heading="Features" active="active_sub_tab[2]">\r\n                                        <div class="form-group row">\r\n                                            <div class="col-sm-2">\r\n                                                <img class="large-thumbnail" ng-if="data.series.has_photos" ng-src="{{ data.series.first_photo }}" />\r\n                                            </div>\r\n                                            <div class="col-sm-2">\r\n                                                <h4>{{ data.series.name }}</h4>\r\n                                                <div class="row" ng-if="data.series.has_photos">\r\n                                                    <div class="col-sm-12">\r\n                                                        <a href="" ng-click="onOpenSeriesPhotos()">View {{ data.series.photo_count }} images</a>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class="col-sm-2">&nbsp;</div>\r\n                                            <div class="col-sm-6">\r\n                                                <div class="row">\r\n                                                    <div class="col-sm-8">\r\n                                                        <h3 class="pull-right" ng-if="info.show_price"><small>Retail Sale Price:&nbsp;&nbsp;&nbsp;</small>\r\n                                                            {{ data.series_retail_price + quote.upgrade_retail_sum + quote.extra_retail_sum + quote.special_features_retail_sum | currency }}\r\n                                                        </h3>\r\n                                                    </div>\r\n                                                    <div class="col-sm-4">\r\n                                                        <h3>\r\n                                                            <button type="button" class="btn btn-pending-selection btn-block" ng-click="toggleShowPrice()">{{ info.show_price_button }}</button>\r\n                                                        </h3>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="row">\r\n                                                    <div class="col-sm-9">\r\n                                                    </div>\r\n                                                    <div class="col-sm-3">\r\n                                                        <button type="button" class="btn btn-pending-selection btn-block" ng-click="onShowFeaturedTotals()">Show Totals</button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="form-group row">\r\n                                            <div class="col-sm-12"><h4>Upgrades and Optional Extras</h4></div>\r\n                                        </div>\r\n                                        <form name="features_form" novalidate class="form top-margin-30" autocomplete="off" form-autofill-fix ng-submit="specify_features(features_form)">\r\n                                            <div class="row">\r\n                                                <div class="col-sm-12">\r\n                                                    <accordion>\r\n                                                        <accordion-group class="category" ng-repeat="(catKey, category) in data.categories" ng-if="category.show_tab">\r\n                                                            <accordion-heading>\r\n                                                                <div>{{ category.title }}</div>\r\n                                                            </accordion-heading>\r\n\r\n                                                            <accordion>\r\n                                                                <accordion-group class="sub-category" ng-repeat="(grpkey, group) in category.groups" ng-if="group.show_tab">\r\n                                                                    <accordion-heading>\r\n                                                                        <div>{{ group.title }}</div>\r\n                                                                    </accordion-heading>\r\n\r\n                                                                    <div ng-repeat="(grp2key, group2) in group.groups">\r\n                                                                        <div  ng-if="group2.item_count" class="row">\r\n                                                                            <div class="form-group col-sm-8">\r\n                                                                                <!-- Split button -->\r\n                                                                                <div ng-if="group2.item_count > 1" class="btn-group" dropdown>\r\n                                                                                  <div id="{{ group2.id }}" class="btn btn-default" ng-class="{true:\'dropdown-pending-selection\', false:\'\'}[group2.selected_item.title == \'\']">\r\n                                                                                      <div class="row sku-choice">\r\n                                                                                          <div class="col-sm-8" ng-if="group2.selected_item.title">\r\n                                                                                            {{ group2.selected_item.title }}\r\n                                                                                          </div>\r\n                                                                                          <div class="col-sm-8" ng-if="group2.selected_item.title == \'\'">\r\n                                                                                            Select {{ group2.title }}\r\n                                                                                          </div>\r\n                                                                                          <div class="col-sm-4" ng-if="group2.retail_price_differential">\r\n                                                                                              <span class="glyphicon glyphicon-tag"></span>\r\n                                                                                              <span>{{ group2.retail_price_differential | currency }}</span>\r\n                                                                                          </div>\r\n                                                                                      </div>\r\n                                                                                      <span class="sr-only">Toggle Dropdown</span>\r\n                                                                                  </div>\r\n\r\n                                                                                  <button type="button" class="btn btn-default"  ng-class="{true:\'btn-pending-selection\', false:\'\'}[group2.selected_item.title == \'\']" dropdown-toggle>\r\n                                                                                    <span class="caret"></span>\r\n                                                                                    <span class="sr-only">Toggle Dropdown</span>\r\n                                                                                  </button>\r\n                                                                                  <ul class="dropdown-menu sku-choice" role="menu" aria-labelledby="">\r\n                                                                                      <li ng-repeat="item in group2.items" ng-class-odd="\'spb-item-bk-odd\'" ng-class="{true:\'selected-dropdown-item\', false:\'\'}[group2.selected_item.id==item.id]"\r\n                                                                                          ng-class-even="\'spb-item-bk-even\'" ng-click="OnSKUClick(group2, item)">\r\n\r\n                                                                                          <div class="row sku-choice">\r\n                                                                                              <div class="col-sm-3">\r\n                                                                                                  <img ng-if="item.photo.length" class="item-thumbnail" ng-src="{{ item.photo }}" />\r\n                                                                                              </div>\r\n                                                                                              <div class="col-sm-6">\r\n                                                                                                  <span>{{ item.title }}</span>\r\n                                                                                              </div>\r\n                                                                                              <div class="col-sm-3">\r\n                                                                                                  <span>{{ item.retail_price - group2.standard_item.retail_price | currency}}</span>\r\n                                                                                              </div>\r\n                                                                                          </div>\r\n                                                                                      </li>\r\n                                                                                  </ul>\r\n                                                                                </div>\r\n\r\n                                                                                <!-- flat div -->\r\n                                                                                <div ng-if="group2.item_count == 1">\r\n                                                                                  <div id="{{ group2.id }}" class="btn btn-default">\r\n                                                                                      <div class="row sku-non-choice">\r\n                                                                                          <div class="col-sm-8">\r\n                                                                                            {{ group2.selected_item.title }}\r\n                                                                                          </div>\r\n                                                                                          <div class="col-sm-4" ng-if="group2.retail_price_differential">\r\n                                                                                              <span class="glyphicon glyphicon-tag"></span>\r\n                                                                                              <span>{{ group2.retail_price_differential | currency }}</span>\r\n                                                                                          </div>\r\n                                                                                      </div>\r\n                                                                                  </div>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                    </div>\r\n\r\n                                                                    <div class="row top-margin-20">\r\n                                                                        <div class="form-group col-sm-3">\r\n                                                                            <button type="submit" class="btn btn-primary form-control" ng-if="group.show_extra_button" ng-click="onAddExtra(group)">+ Add Optional Extras</button>\r\n                                                                        </div>\r\n                                                                    </div>\r\n\r\n                                                                    <div class="row top-margin-20">\r\n                                                                        <div class="form-group col-sm-7">\r\n                                                                            <div  ng-if="group.sub_selected_extra_count">\r\n                                                                                <div class="panel panel-extra-and-special">\r\n                                                                                    <div class="panel-heading">\r\n                                                                                        <h3 class="panel-title">Extras for {{ group.title }}</h3>\r\n                                                                                    </div>\r\n                                                                                    <div class="panel-body">\r\n                                                                                        <div ng-repeat="(grp1key, group1) in group.groups">\r\n                                                                                            <div class="panel panel-default top-margin-20" ng-if="group1.selected_extra_count">\r\n                                                                                                <div class="panel-heading">\r\n                                                                                                    <h4 class="panel-title">{{ group1.title }}</h4>\r\n                                                                                                </div>\r\n                                                                                                <ul class="list-group">\r\n                                                                                                    <li class="list-group-item" ng-repeat="item in group1.extra_items" ng-if="item.is_selected">\r\n                                                                                                        <div class="row sku-choice">\r\n                                                                                                          <div class="col-sm-8">\r\n                                                                                                            {{ item.title }}\r\n                                                                                                          </div>\r\n                                                                                                          <div class="col-sm-4">\r\n                                                                                                            <span class="glyphicon glyphicon-tag"></span>\r\n                                                                                                            <span>{{ item.retail_price | currency }}</span>\r\n                                                                                                          </div>\r\n                                                                                                      </div>\r\n                                                                                                    </li>\r\n                                                                                                </ul>\r\n                                                                                            </div>\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                    </div>\r\n\r\n                                                                    <div class="row top-margin-20">\r\n                                                                        <div class="form-group col-sm-12">\r\n                                                                            <div class="panel panel-extra-and-special">\r\n                                                                                <div class="panel-heading">\r\n                                                                                    <h3 class="panel-title">Request special features</h3>\r\n                                                                                </div>\r\n                                                                                <div class="panel-body">\r\n                                                                                    <div>\r\n                                                                                        <div class="form-group row">\r\n                                                                                            <div class="col-sm-4">\r\n                                                                                                <div class="form-value">\r\n                                                                                                    <label class="large-form-label">Feature</label>\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                            <div class="col-sm-4">\r\n                                                                                                <div class="form-value">\r\n                                                                                                    <label class="large-form-label">Department</label>\r\n                                                                                                    </select>\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                            <div class="col-sm-2">\r\n                                                                                                <div class="form-value">\r\n                                                                                                    <label class="large-form-label">Qty</label>\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                            <div class="col-sm-2">\r\n                                                                                                <div class="form-value">\r\n                                                                                                    <label class="large-form-label">R$</label>\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                    <div ng-repeat="feature in group.additional_expenses">\r\n                                                                                        <div class="form-group row">\r\n                                                                                            <div class="col-sm-4">\r\n                                                                                                <div class="form-value">\r\n                                                                                                    <input placeholder="e.g. Chrome finish"\r\n                                                                                                           ng-model="feature.notes"\r\n                                                                                                           type="text" class="form-control">\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                            <div class="col-sm-4">\r\n                                                                                                <div class="form-value">\r\n                                                                                                    <select  class="form-control"\r\n                                                                                                            ng-model="feature.category_id" name="model"\r\n                                                                                                            ng-options="group.id as group.title for group in category.groups">\r\n                                                                                                        <option value="">Select</option>\r\n                                                                                                    </select>\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                            <div class="col-sm-2">\r\n                                                                                                <div class="form-value">\r\n                                                                                                    <input ng-model="feature.quantity"\r\n                                                                                                           type="number" class="form-control">\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                            <div class="col-sm-2">\r\n                                                                                                <div class="form-value">\r\n                                                                                                    <input ng-model="feature.retail_charge" ng-disabled="should_feature_price_be_disabled(feature)" ng-change="on_special_feature_price_change(feature)"\r\n                                                                                                           type="text" class="form-control">\r\n                                                                                                </div>\r\n                                                                                            </div>\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                    <div class="row">\r\n                                                                                        <div class="col-sm-1">\r\n                                                                                            <div class="form-value">\r\n                                                                                                <button class="btn btn-default form-control" ng-click="add_special_row(group)">+</button>\r\n                                                                                            </div>\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                    </div>\r\n\r\n                                                                    <div class="row top-margin-20">\r\n                                                                        <div class="form-group col-sm-12">\r\n                                                                            <h4>Production Notes</h4>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                    <div class="form-group row">\r\n                                                                        <div class="col-sm-12">\r\n                                                                            <div class="form-value">\r\n                                                                                <input placeholder="e.g. Build Team please note that extra wiring is needed"\r\n                                                                                       ng-model="group.production_notes"\r\n                                                                                       type="text" class="form-control">\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                    </div>\r\n\r\n                                                                </accordion-group>\r\n                                                            </accordion>\r\n\r\n                                                            <div ng-repeat="(grp1key, group1) in category.groups">\r\n                                                                <div  ng-if="group1.item_count" class="row">\r\n                                                                    <div class="form-group col-sm-8">\r\n                                                                        <!-- Split button -->\r\n                                                                        <div ng-if="group1.item_count > 1" class="btn-group" dropdown>\r\n                                                                          <div id="{{ group1.id }}" class="btn btn-default" ng-class="{true:\'dropdown-pending-selection\', false:\'\'}[group1.selected_item.title == \'\']">\r\n                                                                              <div class="row sku-choice">\r\n                                                                                  <div class="col-sm-8" ng-if="group1.selected_item.title">\r\n                                                                                    {{ group1.selected_item.title }}\r\n                                                                                  </div>\r\n                                                                                  <div class="col-sm-8" ng-if="group1.selected_item.title == \'\'">\r\n                                                                                    Select {{ group1.title }}\r\n                                                                                  </div>\r\n                                                                                  <div class="col-sm-4" ng-if="group1.retail_price_differential">\r\n                                                                                      <span class="glyphicon glyphicon-tag"></span>\r\n                                                                                      <span>{{ group1.retail_price_differential | currency }}</span>\r\n                                                                                  </div>\r\n                                                                              </div>\r\n                                                                              <span class="sr-only">Toggle Dropdown</span>\r\n                                                                          </div>\r\n\r\n                                                                          <button type="button" class="btn btn-default"  ng-class="{true:\'btn-pending-selection\', false:\'\'}[group1.selected_item.title == \'\']" dropdown-toggle>\r\n                                                                            <span class="caret"></span>\r\n                                                                            <span class="sr-only">Toggle Dropdown</span>\r\n                                                                          </button>\r\n                                                                          <ul class="dropdown-menu sku-choice" role="menu" aria-labelledby="">\r\n                                                                              <li ng-repeat="item in group1.items" ng-class-odd="\'spb-item-bk-odd\'" ng-class="{true:\'selected-dropdown-item\', false:\'\'}[group1.selected_item.id==item.id]"\r\n                                                                                  ng-class-even="\'spb-item-bk-even\'" ng-click="OnSKUClick(group1, item)">\r\n\r\n                                                                                  <div class="row sku-choice">\r\n                                                                                      <div class="col-sm-3">\r\n                                                                                          <img ng-if="item.photo.length" class="item-thumbnail" ng-src="{{ item.photo }}" />\r\n                                                                                      </div>\r\n                                                                                      <div class="col-sm-6">\r\n                                                                                          <span>{{ item.title }}</span>\r\n                                                                                      </div>\r\n                                                                                      <div class="col-sm-3">\r\n                                                                                          <span>{{ item.retail_price - group1.standard_item.retail_price | currency}}</span>\r\n                                                                                      </div>\r\n                                                                                  </div>\r\n                                                                              </li>\r\n                                                                          </ul>\r\n                                                                        </div>\r\n\r\n                                                                        <!-- flat div -->\r\n                                                                        <div ng-if="group1.item_count == 1">\r\n                                                                          <div id="{{ group1.id }}" class="btn btn-default">\r\n                                                                              <div class="row sku-non-choice">\r\n                                                                                  <div class="col-sm-8">\r\n                                                                                    {{ group1.selected_item.title }}\r\n                                                                                  </div>\r\n                                                                                  <div class="col-sm-4" ng-if="group1.retail_price_differential">\r\n                                                                                      <span class="glyphicon glyphicon-tag"></span>\r\n                                                                                      <span>{{ group1.retail_price_differential | currency }}</span>\r\n                                                                                  </div>\r\n                                                                              </div>\r\n                                                                          </div>\r\n                                                                        </div>\r\n\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n\r\n                                                            <div class="row top-margin-20">\r\n                                                                <div class="form-group col-sm-3">\r\n                                                                    <button type="submit" class="btn btn-primary form-control" ng-if="category.show_extra_button" ng-click="onAddExtra(category)">+ Add Optional Extras</button>\r\n                                                                </div>\r\n                                                            </div>\r\n\r\n                                                            <div class="row top-margin-20">\r\n                                                                <div class="form-group col-sm-7">\r\n                                                                    <div  ng-if="category.sub_selected_extra_count">\r\n                                                                        <div class="panel panel-extra-and-special">\r\n                                                                            <div class="panel-heading">\r\n                                                                                <h3 class="panel-title">Extras for {{ category.title }}</h3>\r\n                                                                            </div>\r\n                                                                            <div class="panel-body">\r\n                                                                                <div ng-repeat="(grp1key, group1) in category.groups">\r\n                                                                                    <div class="panel panel-default top-margin-20" ng-if="group1.selected_extra_count">\r\n                                                                                        <div class="panel-heading">\r\n                                                                                            <h4 class="panel-title">{{ group1.title }}</h4>\r\n                                                                                        </div>\r\n                                                                                        <ul class="list-group">\r\n                                                                                            <li class="list-group-item" ng-repeat="item in group1.extra_items" ng-if="item.is_selected">\r\n                                                                                                <div class="row sku-choice">\r\n                                                                                                  <div class="col-sm-8">\r\n                                                                                                    {{ item.title }}\r\n                                                                                                  </div>\r\n                                                                                                  <div class="col-sm-4">\r\n                                                                                                    <span class="glyphicon glyphicon-tag"></span>\r\n                                                                                                    <span>{{ item.retail_price | currency }}</span>\r\n                                                                                                  </div>\r\n                                                                                              </div>\r\n                                                                                            </li>\r\n                                                                                        </ul>\r\n                                                                                    </div>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n\r\n                                                            <div class="row top-margin-20">\r\n                                                                <div class="form-group col-sm-12">\r\n                                                                    <div class="panel panel-extra-and-special">\r\n                                                                        <div class="panel-heading">\r\n                                                                            <h3 class="panel-title">Request special features</h3>\r\n                                                                        </div>\r\n                                                                        <div class="panel-body">\r\n                                                                            <div>\r\n                                                                                <div class="form-group row">\r\n                                                                                    <div class="col-sm-4">\r\n                                                                                        <div class="form-value">\r\n                                                                                            <label class="large-form-label">Feature</label>\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                    <div class="col-sm-4">\r\n                                                                                        <div class="form-value">\r\n                                                                                            <label class="large-form-label">Department</label>\r\n                                                                                            </select>\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                    <div class="col-sm-2">\r\n                                                                                        <div class="form-value">\r\n                                                                                            <label class="large-form-label">Qty</label>\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                    <div class="col-sm-2">\r\n                                                                                        <div class="form-value">\r\n                                                                                            <label class="large-form-label">R$</label>\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                            <div ng-repeat="feature in category.additional_expenses">\r\n                                                                                <div class="form-group row">\r\n                                                                                    <div class="col-sm-4">\r\n                                                                                        <div class="form-value">\r\n                                                                                            <input placeholder="e.g. Chrome finish"\r\n                                                                                                   ng-model="feature.notes"\r\n                                                                                                   type="text" class="form-control">\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                    <div class="col-sm-4">\r\n                                                                                        <div class="form-value">\r\n                                                                                            <select  class="form-control"\r\n                                                                                                    ng-model="feature.category_id" name="model"\r\n                                                                                                    ng-options="group.id as group.title for group in category.groups">\r\n                                                                                                <option value="">Select</option>\r\n                                                                                            </select>\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                    <div class="col-sm-2">\r\n                                                                                        <div class="form-value">\r\n                                                                                            <input ng-model="feature.quantity"\r\n                                                                                                   type="number" class="form-control">\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                    <div class="col-sm-2">\r\n                                                                                        <div class="form-value">\r\n                                                                                            <input ng-model="feature.retail_charge" ng-disabled="should_feature_price_be_disabled(feature)" ng-change="on_special_feature_price_change(feature)"\r\n                                                                                                           type="text" class="form-control">\r\n                                                                                        </div>\r\n                                                                                    </div>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                            <div class="row">\r\n                                                                                <div class="col-sm-1">\r\n                                                                                    <div class="form-value">\r\n                                                                                        <button class="btn btn-default form-control" ng-click="add_special_row(category)">+</button>\r\n                                                                                    </div>\r\n                                                                                </div>\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n\r\n                                                            <div class="row top-margin-20">\r\n                                                                <div class="form-group col-sm-12">\r\n                                                                    <h4>Production Notes</h4>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <div class="form-group row">\r\n                                                                <div class="col-sm-12">\r\n                                                                    <div class="form-value">\r\n                                                                        <input placeholder="e.g. Build Team please note that extra wiring is needed"\r\n                                                                               ng-model="category.production_notes"\r\n                                                                               type="text" class="form-control">\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n\r\n                                                        </accordion-group>\r\n                                                    </accordion>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class="row top-margin-20">\r\n                                                <div class="form-group col-sm-3">\r\n                                                    <button type="submit" class="btn btn-primary form-control">Update and proceed</button>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class="row">\r\n                                                <div class="alert alert-success" ng-if="quote.update_successful_message">{{ quote.update_successful_message }}</div>\r\n                                                <div class="alert alert-danger" ng-if="quote.update_failed_message">{{ quote.update_failed_message }}</div>\r\n                                            </div>\r\n                                        </form>\r\n                                    </tab>\r\n                                    <tab heading="Finishes / Colour">\r\n                                        Finishes / Colour\r\n                                    </tab>\r\n                                    <tab heading="Cost & Invoicing">\r\n                                        Cost & Invoicing\r\n                                    </tab>\r\n                                    <tab heading="Resources">\r\n                                        Resources\r\n                                    </tab>\r\n                                </tabset>\r\n                            </div>\r\n                        </div>\r\n                    </tab>\r\n                    <tab heading="Status / Documents / History">\r\n                        <div class="panel panel-default">\r\n                            <div class="panel-body">\r\n                                Documents\r\n                            </div>\r\n                        </div>\r\n                    </tab>\r\n                    <tab heading="Costing">\r\n                        <div class="panel panel-default">\r\n                            <div class="panel-body">\r\n                                Costing\r\n                            </div>\r\n                        </div>\r\n                    </tab>\r\n                </tabset>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="modal fade" id="extra_modal">\r\n        <div class="modal-dialog">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\r\n                            aria-hidden="true">&times;</span></button>\r\n                    <h4 class="modal-title">Extras for {{ data.category_for_extra.title }}</h4>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <div ng-repeat="(grp1key, group1) in data.category_for_extra.groups" ng-if="group1.extra_item_count" class="top-margin-20 panel panel-default">\r\n                        <div class="panel-heading">\r\n                            <h3 class="panel-title">{{ group1.title }}</h3>\r\n                        </div>\r\n                        <div class="panel-body">\r\n                            <div class="row sku-choice" ng-repeat="item in group1.extra_items">\r\n                                <div class="col-sm-12">\r\n                                    <div class="row">\r\n                                        <div class="col-sm-1">\r\n                                            <input type="checkbox" model="item.is_selected" ng-checked="item.is_selected" ng-click="extra_checked(data.category_for_extra, group1, item)" aria-label="...">\r\n                                        </div>\r\n                                        <div class="col-sm-2">\r\n                                              <img ng-if="item.photo.length" class="item-thumbnail" ng-src="{{ item.photo }}" />\r\n                                        </div>\r\n                                        <div class="col-sm-6">\r\n                                            <span>{{ item.title }}</span>\r\n                                        </div>\r\n                                        <div class="col-sm-3">\r\n                                            <span>{{ item.retail_price | currency }}</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button type="button" class="btn btn-primary" ng-click="onAddExtraSubmit()">Update</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="modal fade" id="featured_totals_modal">\r\n        <div class="modal-dialog wide">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\r\n                            aria-hidden="true">&times;</span></button>\r\n                    <h4 class="modal-title">Totals</h4>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <table class="table">\r\n                        <tr>\r\n                            <th>&nbsp;</th>\r\n                            <th>Manufacturing Cost</th>\r\n                            <th>Manufacturing Margin</th>\r\n                            <th>Wholesale</th>\r\n                            <th>Reseller Margin</th>\r\n                            <th>Retail</th>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                <h5>Adjustments</h5>\r\n                                Please enter adjustments in these fields >\r\n                            </td>\r\n                            <td></td>\r\n                            <td></td>\r\n                            <td>\r\n                                <input type="text" class="form-control" ng-model="quote.wholesale_adjustment" name="wholesale_adjustment" />\r\n                            </td>\r\n                            <td></td>\r\n                            <td>\r\n                                <input type="text" class="form-control" ng-model="quote.retail_sale_adjustment" name="retail_sale_adjustment" />\r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                Basic Caravan Prices\r\n                            </td>\r\n                            <td>{{ data.series_cost_price | currency }}</td>\r\n                            <td>{{ data.series_retail_price - data.series_cost_price | currency }}</td>\r\n                            <td>{{ data.series_wholesale_price | currency }}</td>\r\n                            <td>{{ data.series_retail_price - data.series_wholesale_price | currency }}</td>\r\n                            <td>{{ data.series_retail_price | currency }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                Subtotal of Upgrades\r\n                            </td>\r\n                            <td>{{ quote.upgrade_cost_sum | currency }}</td>\r\n                            <td>{{ quote.upgrade_retail_sum - quote.upgrade_cost_sum | currency }}</td>\r\n                            <td>{{ quote.upgrade_wholesale_sum | currency }}</td>\r\n                            <td>{{ quote.upgrade_retail_sum - quote.upgrade_wholesale_sum | currency }}</td>\r\n                            <td>{{ quote.upgrade_retail_sum | currency }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                Subtotal of Extras\r\n                            </td>\r\n                            <td>{{ quote.extra_cost_sum | currency }}</td>\r\n                            <td>{{ quote.extra_retail_sum - quote.extra_cost_sum | currency }}</td>\r\n                            <td>{{ quote.extra_wholesale_sum | currency }}</td>\r\n                            <td>{{ quote.extra_retail_sum - quote.extra_wholesale_sum | currency }}</td>\r\n                            <td>{{ quote.extra_retail_sum | currency }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td>\r\n                                Subtotal of Special Items\r\n                            </td>\r\n                            <td>{{ 0 | currency }}</td>\r\n                            <td>{{ 0 | currency }}</td>\r\n                            <td>{{ 0 | currency }}</td>\r\n                            <td>{{ 0 | currency }}</td>\r\n                            <td>{{ 0 | currency }}</td>\r\n                        </tr>\r\n                        <tr ng-if="quote.has_special">\r\n                            <td>\r\n                                Special:\r\n                            </td>\r\n                            <td>{{ 0 | currency }}</td>\r\n                            <td>{{ 0 | currency }}</td>\r\n                            <td>{{ 0 | currency }}</td>\r\n                            <td>{{ 0 | currency }}</td>\r\n                            <td>{{ 0 | currency }}</td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td class="bold">\r\n                                Grand Totals\r\n                            </td>\r\n                            <td>{{ data.series_cost_price + quote.upgrade_cost_sum + quote.extra_cost_sum | currency }}</td>\r\n                            <td>{{ (data.series_retail_price + quote.upgrade_retail_sum + quote.extra_retail_sum)\r\n                                    - (data.series_cost_price + quote.upgrade_cost_sum + quote.extra_cost_sum) | currency }}</td>\r\n                            <td>{{ data.series_wholesale_price + quote.upgrade_wholesale_sum + quote.extra_wholesale_sum | currency }}</td>\r\n                            <td>{{ (data.series_retail_price + quote.upgrade_retail_sum + quote.extra_retail_sum) -\r\n                                    (data.series_wholesale_price + quote.upgrade_wholesale_sum + quote.extra_wholesale_sum) | currency }}</td>\r\n                            <td>{{ data.series_retail_price + quote.upgrade_retail_sum + quote.extra_retail_sum | currency }}</td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div id="photos" class="modal fade">\r\n        <div class="modal-dialog">\r\n            <div class="modal-content tall">\r\n                <div class="modal-header">\r\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\r\n                            aria-hidden="true">&times;</span></button>\r\n                    <h4 class="modal-title"><b>{{ get_model_name() }}:</b> {{ get_series_name() }}</h4>\r\n                </div>\r\n                <div class="modal-body tall">\r\n                    <ul class="image-carousel" ng-if="data.series.photo_count" rn-carousel rn-carousel-controls class="image">\r\n                        <li ng-repeat="photo_url in data.series.photo_urls">\r\n                            <img ng-src="{{ photo_url }}" class="img-responsive"/>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n                <div class="modal-footer">\r\n                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n';
}});