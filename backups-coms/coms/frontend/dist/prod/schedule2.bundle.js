webpackJsonp([8],{0:function(e,t,n){e.exports=n(177)},2:function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},3:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(23),o=r(a);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},18:function(e,t){},23:function(e,t,n){e.exports={default:n(25),__esModule:!0}},24:function(e,t,n){e.exports={default:n(46),__esModule:!0}},25:function(e,t,n){n(31);var r=n(4).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},31:function(e,t,n){var r=n(9);r(r.S+r.F*!n(8),"Object",{defineProperty:n(11).f})},46:function(e,t,n){n(62),e.exports=n(4).Object.values},53:function(e,t,n){var r=n(8),a=n(17),o=n(13),i=n(22).f;e.exports=function(e){return function(t){for(var n,d=o(t),s=a(d),l=s.length,c=0,u=[];l>c;)n=s[c++],r&&!i.call(d,n)||u.push(e?[n,d[n]]:d[n]);return u}}},62:function(e,t,n){var r=n(9),a=n(53)(!1);r(r.S,"Object",{values:function(e){return a(e)}})},74:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),d=r(i);t.default=function(e){e.factory("ScheduleDashboardApiService",["ApiService",function(e){var t=function(){function t(){(0,o.default)(this,t)}return(0,d.default)(t,[{key:"assignProductionDates",value:function(t){return e.postData("schedule/dashboard2/assign-production-dates",{assign_production_dates_for_month:e.formatDate(t)})}},{key:"changeOrderScheduleMonthPosition",value:function(t,n,r,a){return e.postData("schedule/dashboard2/change-order-schedule-month-position",{view_month:e.formatDate(t),order_list:a,new_schedule_month:e.formatDate(n),new_position_month:r})}},{key:"changeOrderScheduleMonthPosition1",value:function(t,n,r,a,o){return e.postData("schedule/dashboard2/change-order-schedule-unit-position",{view_month:e.formatDate(t),order_list:a,new_schedule_month:e.formatDate(n),new_position_month:r,production_unit:1})}},{key:"getInitialData",value:function(t){return e.getData("schedule/dashboard2/initial/"+e.formatDate(t))}},{key:"getInitialData1",value:function(t){return e.getData("schedule/dashboard2/initialdata/"+e.formatDate(t))}},{key:"getDealerInitialData",value:function(t){return e.getData("schedule/dashboard2/dealer/"+e.formatDate(t))}},{key:"saveCommentOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-order",{order_id:t.id,schedule_comments:n})}},{key:"saveQCOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-transport-order",{order_id:t.id+"",qc_comments_from:n})}},{key:"saveWaterOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-water-order",{order_id:t.id+"",watertest_comments:n})}},{key:"saveDispatchOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-dispatch-order",{order_id:t.id+"",dispatch_comments:n})}},{key:"saveDealerCommentOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-order",{order_id:t.id,dealer_comments:n})}},{key:"saveLockdown",value:function(t,n){return e.postData("schedule/dashboard2/update-lockdown",{lockdown_number:n,lockdown_month:t})}},{key:"updateOrderPosition",value:function(t,n,r,a,o,i){return e.postData("schedule/dashboard2/update-order",{view_month:e.formatDate(t),order_id:n.id,new_month:r,new_position:a,previous_order_id:o,next_order_id:i})}},{key:"massFinalizeOrder",value:function(t,n){return e.postData("orders/mass-finalize-orders",{view_month:e.formatDate(t),order_list:n})}}]),t}();return new t}])},e.exports=t.default},75:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),d=r(i);t.default=function(e){e.factory("ScheduleDashboardService",function(){var e=function(){function e(){(0,o.default)(this,e)}return(0,d.default)(e,[{key:"getSpecialFeatureClass",value:function(e){return"pending"==e.special_feature_status?"glyphicon-question-sign":"approved"==e.special_feature_status?"glyphicon-ok-sign":"rejected"==e.special_feature_status?"glyphicon-remove-sign":""}},{key:"isSameMonth",value:function(e,t){return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()}},{key:"containsCaseInsensitive",value:function(e,t){return e.toLowerCase().indexOf(t.toLowerCase())!=-1}}]),e}();return new e})},e.exports=t.default},94:function(e,t){},146:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){n(150)(e),n(157)(e),n(149)(e),n(148)(e),n(154)(e),n(152)(e),e.controller("ScheduleController",function(){n(94),n(18)})},e.exports=t.default},147:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),d=r(i);t.default=function(e){e.factory("ScheduleCapacityApiService",["ApiService",function(e){var t=function(){function t(){(0,o.default)(this,t)}return(0,d.default)(t,[{key:"getInitialData",value:function(t){return e.getData("schedule/capacity2/initial/"+e.formatDate(t))}},{key:"saveData",value:function(t){return e.postData("schedule/capacity2/save",{weekList:t})}}]),t}();return new t}])},e.exports=t.default},148:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),o=r(a),i=n(1),d=r(i);t.default=function(e){n(147)(e),e.controller("ScheduleCapacityController",["$anchorScroll","$cookies","$filter","$rootScope","$scope","$state","$stateParams","AppSettings","ScheduleCapacityApiService",function(e,t,n,r,a,i,s,l,c){a.initialDataLoading=!1,a.saveLoading=!1,a.currentMonth=s.currentMonth,t.putObject("scheduleCapacityCurrentMonth",s.currentMonth),a.monthList=[];var u=function(e){a.initialDataLoading=!0,c.getInitialData(e).then(function(e){if(a.weekList=e.week_list,r.permissions=e.permissions,0==a.monthList.length){var t=!0,o=!1,i=void 0;try{for(var s,c=(0,d.default)(e.month_list);!(t=(s=c.next()).done);t=!0){var u=s.value,g=new Date(Date.parse(u)),p=new Date(g);p.setMonth(p.getMonth()+5),a.monthList.push({title:n("date")(g,l.FORMAT_DATE_MONTH_SHORT_JS)+" - "+n("date")(p,l.FORMAT_DATE_MONTH_SHORT_JS),value:g}),h(a.currentMonth,g)&&(a.currentMonth=g)}}catch(e){o=!0,i=e}finally{try{!t&&c.return&&c.return()}finally{if(o)throw i}}}var _=!0,m=!1,b=void 0;try{for(var f,v=function(){var e=f.value;a.$watch(function(){return e.days},function(t,n){e.total_capacity=t.reduce(function(e,t){return e+Number(t.capacity)},0)},!0)},y=(0,d.default)(a.weekList);!(_=(f=y.next()).done);_=!0)v()}catch(e){m=!0,b=e}finally{try{!_&&y.return&&y.return()}finally{if(m)throw b}}}).finally(function(){a.initialDataLoading=!1})};u(a.currentMonth),a.$watch("currentMonth",function(e,t){h(e,t)||i.go("schedule2.capacity",{currentMonth:e},{reload:!0})}),a.duplicate=function(e){for(var t=0,n=a.weekList[t];n.start_label!=e.start_label&&t<a.weekList.length;)t++,n=a.weekList[t];if(t<a.weekList.length-1)for(var r=0;r<7;r++)a.weekList[t+1].days[r].capacity=a.weekList[t].days[r].capacity},a.save=function(){a.saveLoading=!0,c.saveData(a.weekList).then(function(e){a.successMessages=["Data saved successfully"],a.errorMessages=[]},function(e){var t=e.data.message||e.data;("undefined"==typeof t?"undefined":(0,o.default)(t))==(0,o.default)("")&&(t=[t]),a.errorMessages=t}).finally(function(){e("message-anchor"),a.saveLoading=!1})};var h=function(e,t){return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()}}])},e.exports=t.default},149:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);t.default=function(e){n(74)(e),n(75)(e),e.controller("DealerScheduleDashboardController",["$anchorScroll","$cookies","$filter","$rootScope","$scope","AppSettings","DateProvider","ScheduleDashboardApiService","ScheduleDashboardService",function(e,t,r,a,i,d,s,l,c){if(n(94),n(18),a.permissions={},i.monthDataLoading=!1,i.searchStr="",i.monthList=[],i.isOrderDealerCommentSaving={},t.getObject("scheduleDashboardCurrentMonth"))i.currentMonth=new Date(Date.parse(t.getObject("scheduleDashboardCurrentMonth")));else{var u=s.now();i.currentMonth=new Date(u.getFullYear(),u.getMonth())}var h=function(e){i.monthDataLoading=!0,l.getDealerInitialData(e).then(function(e){if(i.orderList=e.order_list,a.permissions=e.permissions,0==i.monthList.length){var t=!0,n=!1,s=void 0;try{for(var l,u=(0,o.default)(e.month_list);!(t=(l=u.next()).done);t=!0){var h=l.value,g=new Date(Date.parse(h));i.monthList.push({title:r("date")(g,d.FORMAT_DATE_MONTH_SHORT_JS),value:g}),c.isSameMonth(i.currentMonth,g)&&(i.currentMonth=g)}}catch(e){n=!0,s=e}finally{try{!t&&u.return&&u.return()}finally{if(n)throw s}}}}).catch(function(e){e?i.errorMessages=[e.data]:i.errorMessages=["Error while getting the initial data."]}).finally(function(){i.monthDataLoading=!1})};h(i.currentMonth),i.getSpecialFeatureClass=function(e){return c.getSpecialFeatureClass(e)},i.$watch("currentMonth",function(e,n){c.isSameMonth(e,n)||(h(e),t.putObject("scheduleDashboardCurrentMonth",e))}),i.onOrderDealerCommentChange=function(e,t){var n=e.target.value,a=t.dealer_comments;n!=a&&(i.isOrderDealerCommentSaving[t.id]=!0,l.saveDealerCommentOnOrder(t,n).then(function(){i.errorMessages=[]}).catch(function(){i.errorMessages=["Error while updating the comments for order #"+t.index+" for "+r("date")(t.month,d.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){i.isOrderDealerCommentSaving[t.id]=!1}))},i.filterOrders=function(e){return!!e.month_header||(c.containsCaseInsensitive(e.model_series,i.searchStr)||c.containsCaseInsensitive(e.customer,i.searchStr)||c.containsCaseInsensitive(e.chassis,i.searchStr)||c.containsCaseInsensitive(e.dealer_comments,i.searchStr))}}])},e.exports=t.default},150:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(24),o=r(a),i=n(1),d=r(i);t.default=function(e){n(74)(e),n(75)(e),e.controller("ScheduleDashboardController",["$anchorScroll","$cookies","$filter","$rootScope","$scope","AppSettings","DateProvider","ScheduleDashboardApiService","ScheduleDashboardService",function(e,t,n,r,a,i,s,l,c){r.permissions={},a.monthDataLoading=!1,a.assignProductionDatesLoading=!1,a.orderCommentLoading={},a.orderSortLoading={},a.searchStr="",a.monthList=[],a.ordersSelected=[],a.production_unit=[],a.sortableOptions={axis:"y",containment:"#dashboard .content table tbody, #dashboard .content table tfoot",forceHelperSize:!0,forcePlaceholderSize:!0,handle:".drag-handle",placeholder:"sortable-placeholder",helper:function e(t,n){var r=n.children(),e=n.clone();return e.children().each(function(e,t){$(t).width(r.eq(e).outerWidth())}),e},stop:function(e,t){var n=(t.item.sortable.index,t.item.sortable.dropindex),r=t.item.sortable.model;if("dropindex"in t.item.sortable){for(var o=void 0,i=n,d=void 0,s=void 0,c=void 0,u=void 0,h=0;h<a.orderList.length;h++){var g=a.orderList[h];if(g.month_header&&(c=g.month,u=h),g.id==r.id){i-=u,o=c,h+1<a.orderList.length&&(s=a.orderList[h+1].id);break}d=g.id}a.orderSortLoading[r.id]=!0,l.updateOrderPosition(a.currentMonth,r,o,i,d,s).then(function(e){a.orderList=e.order_list,a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while updating the orders. Please reload the page."]}).finally(function(){a.orderSortLoading[r.id]=!1})}}};var u=s.now();a.currentMonth=new Date(u.getFullYear(),u.getMonth());var h=function(e){a.monthDataLoading=!0,l.getInitialData(e).then(function(e){if(a.orderList=e.order_list,a.lockdownMonth=e.lockdown_month,a.lockdownNumber=e.lockdown_number,r.permissions=e.permissions,0==a.monthList.length){var t=!0,o=!1,s=void 0;try{for(var l,u=(0,d.default)(e.month_list);!(t=(l=u.next()).done);t=!0){var h=l.value,g=new Date(Date.parse(h));a.monthList.push({title:n("date")(g,i.FORMAT_DATE_MONTH_SHORT_JS),value:g}),c.isSameMonth(a.currentMonth,g)&&(a.currentMonth=g)}}catch(e){o=!0,s=e}finally{try{!t&&u.return&&u.return()}finally{if(o)throw s}}}}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while getting the initial data."]}).finally(function(){a.monthDataLoading=!1})};h(a.currentMonth),$("#chosen_month_show").MonthPicker({Button:!1,MonthFormat:"M yy",SelectedMonth:0,AltFormat:"yy-mm-dd",AltField:"#chosen_month",OnAfterMenuClose:function(){$("#chosen_month").trigger("input")}}),a.$watch("currentMonth",function(e,t){e instanceof Date||(e=new Date(Date.parse(e))),t instanceof Date||(t=new Date(Date.parse(t))),c.isSameMonth(e,t)||h(e)}),a.getStatusClass=function(e){return"plans_completed"==e?"summary_plans_completed":e},a.getOrderSummarySorted=function(e){var t=Object();return"not_finalized"in e&&(t.not_finalized=e.not_finalized),"pending_draft"in e&&(t.pending_draft=e.pending_draft),"pending_customer"in e&&(t.pending_customer=e.pending_customer),"customer_approved"in e&&(t.customer_approved=e.customer_approved),"plans_completed"in e&&(t.plans_completed=e.plans_completed),t},a.getSpecialFeatureClass=function(e){return c.getSpecialFeatureClass(e)},a.onOrderCommentChange=function(e,t){var r=e.target.value,o=t.schedule_comments;r!=o&&(a.orderCommentLoading[t.id]=!0,l.saveCommentOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating the comments for order #"+t.index+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.orderCommentLoading[t.id]=!1}))},a.isSortingAllowed=function(){return a.permissions.change_schedule_dashboard},a.hasSequenceChangeInProgress=function(){return!(0,o.default)(a.orderSortLoading).every(function(e){return!e})},a.isSortingAvailable=function(){return!a.searchStr&&!a.hasSequenceChangeInProgress()&&!a.moveCmdInitiated},a.isOrderMovingButtonAvailable=function(){return!a.hasSequenceChangeInProgress()&&!a.moveCmdInitiated},a.filterOrders=function(e){return!!e.month_header||(c.containsCaseInsensitive(e.model_series,a.searchStr)||c.containsCaseInsensitive(e.dealership,a.searchStr)||c.containsCaseInsensitive(e.customer,a.searchStr)||c.containsCaseInsensitive(e.chassis,a.searchStr)||c.containsCaseInsensitive(e.order_id,a.searchStr)||c.containsCaseInsensitive(e.schedule_comments,a.searchStr))},a.assignProductionDates=function(){a.assignProductionDatesLoading=!0,l.assignProductionDates(a.currentMonth).then(function(e){a.orderList=e.order_list,a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while updating the orders. Please reload the page."]}).finally(function(){a.assignProductionDatesLoading=!1})},a.onLockdown=function(e,t){l.saveLockdown(e,t).then(function(e){a.errorMessages=[],a.lockdownMonth=e.lockdown_month,a.lockdownNumber=e.lockdown_number}).catch(function(){a.errorMessages=["Error while locking down order #"+t+" for "+n("date")(e,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){})},a.onMoveCmd=function(){a.moveCmdInitiated=!0,l.changeOrderScheduleMonthPosition(a.currentMonth,a.move_month,a.new_position,a.ordersSelected).then(function(e){a.orderList=e.order_list,a.errorMessages=[]}).catch(function(e){(e||{}).data?a.errorMessages=[e.data]:a.errorMessages=["Error while updating the orders. Please reload the page."]}).finally(function(){angular.forEach(a.ordersSelected,function(e){return a.orderSortLoading[e]=!1}),a.moveCmdInitiated=!1}),$("#moveOrderModal").modal("hide")},a.onMoveCmd1=function(){a.moveCmdInitiated=!0,l.changeOrderScheduleMonthPosition1(a.currentMonth,a.move_month,a.new_position,a.ordersSelected,a.production_unit).then(function(e){a.orderList=e.order_list,a.errorMessages=[]}).catch(function(e){(e||{}).data?a.errorMessages=[e.data]:a.errorMessages=["Error while updating the orders. Please reload the page."]}).finally(function(){angular.forEach(a.ordersSelected,function(e){return a.orderSortLoading[e]=!1}),a.moveCmdInitiated=!1}),$("#moveOrderModal2").modal("hide")},a.moveOrderCount=function(){var e=0;return angular.forEach(a.orderList,function(t){t.selected&&e++}),e},$("#moveOrderModal.modal").on("hidden.bs.modal",function(){a.moveCmdInitiated||(angular.forEach(a.ordersSelected,function(e){return a.orderSortLoading[e]=!1}),angular.forEach(a.orderList,function(e){e.selected&&(e.selected=!1)}),a.$apply())}),$("#moveOrderModal2.modal").on("hidden.bs.modal",function(){a.moveCmdInitiated||(angular.forEach(a.ordersSelected,function(e){return a.orderSortLoading[e]=!1}),angular.forEach(a.orderList,function(e){e.selected&&(e.selected=!1)}),a.$apply()),$(this).find("input").val("").end().find("select").val("").end().find("input[type=checkbox], input[type=radio],input[type=text]").prop("checked","").end()}),a.moveOrders=function(){a.ordersSelected=[],angular.forEach(a.orderList,function(e,t){e.selected&&(a.ordersSelected.push(e.id),a.orderSortLoading[e.id]=!0)}),a.modalTitle="Move "+a.ordersSelected.length+" Order",a.ordersSelected.length>1&&(a.modalTitle+="s"),$("#moveOrderModal.modal").modal({backdrop:"static",keyboard:!1})},a.moveOrders2=function(){a.ordersSelected=[],angular.forEach(a.orderList,function(e,t){e.selected&&(a.ordersSelected.push(e.id),a.orderSortLoading[e.id]=!0)}),a.modalTitle="Move "+a.ordersSelected.length+"to Caravans",a.ordersSelected.length>1&&(a.modalTitle+="s"),$("#moveOrderModal2.modal").modal({backdrop:"static",keyboard:!1})},a.lockOrders=function(){a.ordersSelected=[],a.lockCmdInitiated=!0,angular.forEach(a.orderList,function(e,t){e.selected&&a.ordersSelected.push(e.id)}),l.massFinalizeOrder(a.currentMonth,a.ordersSelected).then(function(e){a.orderList=e.order_list,a.errorMessages=[]}).catch(function(e){(e||{}).data?a.errorMessages=[e.data]:a.errorMessages=["Error while updating the orders. Please reload the page."]}).finally(function(){a.lockCmdInitiated=!1})}}])},e.exports=t.default},151:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),d=r(i);t.default=function(e){e.factory("ScheduleExportApiService",["ApiService",function(e){var t=function(){function t(){(0,o.default)(this,t)}return(0,d.default)(t,[{key:"getInitialData",value:function(){return e.getData("schedule/export2/initial")}}]),t}();return new t}])},e.exports=t.default},152:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),o=r(a);t.default=function(e){n(151)(e),e.controller("ScheduleExportController",["$filter","$rootScope","$scope","AppSettings","ScheduleExportApiService",function(e,t,n,r,a){n.successMessages=[],n.errorMessages=[],n.monthList=[],n.exportScheduleCSV={invalidDates:!1,dateFrom:null,dateTo:null},n.contractorExports={list:[],invalidDates:!1,dateFrom:null,dateTo:null};var i=function(){["#exportScheduleCSV_dateFrom","#exportScheduleCSV_dateTo","#exportScheduleCSV1_dateFrom","#contractorExports_dateFrom","#contractorExports_dateTo"].forEach(function(e){$(e+"_shown").MonthPicker({Button:!1,MonthFormat:"M yy",SelectedMonth:0,AltFormat:"yy-mm-dd",AltField:e,OnAfterMenuClose:function(){$(e).trigger("input")}})})};setTimeout(i,1500),a.getInitialData().then(function(a){if(0==n.monthList.length){var i=!0,s=!1,l=void 0;try{for(var c,u=(0,o.default)(a.month_list);!(i=(c=u.next()).done);i=!0){var h=c.value,g=new Date(Date.parse(h));n.monthList.push({title:e("date")(g,r.FORMAT_DATE_MONTH_SHORT_JS),value:g}),d(g)&&(n.exportScheduleCSV.dateFrom=n.exportScheduleCSV.dateTo=g,n.contractorExports.dateFrom=n.contractorExports.dateTo=g)}}catch(e){s=!0,l=e}finally{try{!i&&u.return&&u.return()}finally{if(s)throw l}}}t.permissions=a.permissions,n.dealers=a.dealer,n.contractorExports.list=a.contractor_exports}),n.validateDates=function(e){e.invalidDates=e.dateFrom>e.dateTo};var d=function(e){var t=new Date;return t.getFullYear()==e.getFullYear()&&t.getMonth()==e.getMonth()}}])},e.exports=t.default},153:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),d=r(i);t.default=function(e){e.factory("SchedulePlannerApiService",["ApiService",function(e){var t=function(){function t(){(0,o.default)(this,t)}return(0,d.default)(t,[{key:"getInitialData",value:function(){return e.getData("schedule/planner2/initial")}},{key:"saveData",value:function(t){return e.postData("schedule/planner2/save",{data:t})}}]),t}();return new t}])},e.exports=t.default},154:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),o=r(a),i=n(1),d=r(i);t.default=function(e){n(153)(e),e.controller("SchedulePlannerController",["$anchorScroll","$rootScope","$scope","SchedulePlannerApiService",function(e,t,n,r){n.saveLoading=!1,n.defaultDate=new Date(new Date-2592e5),n.successMessages=[],n.errorMessages=[];var a=function(t){var r=!1,a=!0,o=!1,i=void 0;try{for(var s,l=(0,d.default)(t);!(a=(s=l.next()).done);a=!0){var c=s.value;c.initialValue=new Date(c.production_month),r|=c.capacity<c.total_orders}}catch(e){o=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw i}}r&&n.errorMessages.push("One or more months have more orders than their allocated capacity."),n.all_data=t,e("message-anchor")};r.getInitialData().then(function(e){a(e.data),t.permissions=e.permissions}),n.save=function(){n.saveLoading=!0,r.saveData(n.all_data).then(function(e){n.successMessages=["Data saved successfully"],n.errorMessages=[],a(e.data)},function(e){var t=e.data;("undefined"==typeof t?"undefined":(0,o.default)(t))==(0,o.default)("")&&(t=[t]),n.errorMessages=t}).finally(function(){n.saveLoading=!1})}}])},e.exports=t.default},155:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),d=r(i);t.default=function(e){e.factory("ScheduleDashboardApiService",["ApiService",function(e){var t=function(){function t(){(0,o.default)(this,t)}return(0,d.default)(t,[{key:"assignProductionDates",value:function(t){return e.postData("schedule/transportdashboard/assign-production-dates",{assign_production_dates_for_month:e.formatDate(t)})}},{key:"changeOrderScheduleMonthPosition",value:function(t,n,r,a){return e.postData("schedule/transportdashboard/change-order-schedule-month-position",{view_month:e.formatDate(t),order_list:a,new_schedule_month:e.formatDate(n),new_position_month:r})}},{key:"getInitialData",value:function(t){return e.getData("schedule/dashboard/initialdata/"+e.formatDate(t))}},{key:"getDealerInitialData",value:function(t){return e.getData("schedule/transportdashboard/dealer/"+e.formatDate(t))}},{key:"saveCommentOnOrder",value:function(t,n){return e.postData("schedule/transportdashboard/update-order",{order_id:t.id,schedule_comments:n})}},{key:"saveQCOnOrder",value:function(t,n){return e.postData("schedule/dashboard/update-transport-order",{order_id:t.id+"",qc_comments_from:n})}},{key:"saveWaterOnOrder",value:function(t,n){return e.postData("schedule/dashboard/update-water-order",{order_id:t.id+"",qc_comments_from:n})}},{key:"saveDispatchOnOrder",value:function(t,n){return e.postData("schedule/dashboard/update-dispatch-order",{order_id:t.id+"",qc_comments_from:n})}},{key:"saveDealerCommentOnOrder",value:function(t,n){return e.postData("schedule/transportdashboard/update-order",{order_id:t.id,dealer_comments:n})}},{key:"saveLockdown",value:function(t,n){return e.postData("schedule/transportdashboard/update-lockdown",{lockdown_number:n,lockdown_month:t})}},{key:"updateOrderPosition",value:function(t,n,r,a,o,i){return e.postData("schedule/transportdashboard/update-order",{view_month:e.formatDate(t),order_id:n.id,new_month:r,new_position:a,previous_order_id:o,next_order_id:i})}},{key:"massFinalizeOrder",value:function(t,n){return e.postData("orders/mass-finalize-orders",{view_month:e.formatDate(t),order_list:n})}}]),t}();return new t}])},e.exports=t.default},156:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),d=r(i);t.default=function(e){e.factory("ScheduleDashboardService",function(){var e=function(){function e(){(0,o.default)(this,e)}return(0,d.default)(e,[{key:"getSpecialFeatureClass",value:function(e){return"pending"==e.special_feature_status?"glyphicon-question-sign":"approved"==e.special_feature_status?"glyphicon-ok-sign":"rejected"==e.special_feature_status?"glyphicon-remove-sign":""}},{key:"isSameMonth",value:function(e,t){return e.getFullYear()==t.getFullYear()&&e.getMonth()==t.getMonth()}},{key:"containsCaseInsensitive",value:function(e,t){return e.toLowerCase().indexOf(t.toLowerCase())!=-1}}]),e}();return new e})},e.exports=t.default},157:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(24),o=r(a),i=n(1),d=r(i);t.default=function(e){n(158)(e),n(155)(e),n(156)(e),e.controller("ScheduleTransportController",["$anchorScroll","$cookies","$filter","$rootScope","$scope","AppSettings","DateProvider","ScheduleTransportDashboardApiService","ScheduleDashboardApiService","ScheduleDashboardService",function(e,t,n,r,a,i,s,l,c,u){r.permissions={},a.monthDataLoading=!1,a.assignProductionDatesLoading=!1,a.sendEmailLoading=!1,a.sendReadyEmailLoading=!1,a.qcstatusvar={},a.qcshowgreen=!1,a.qcshow={},a.watershow={},a.dispatchshow={},a.hold_caravans_cur=!1,a.qc_comm_check={},a.testdate_dynamic="",a.calcdate={},a.planqcdate={},a.waterdate={},a.plandispdate={},a.holdblock={},a.prodblock={},a.prodblock1={},a.prodblock2={},a.chassisblock={},a.buildingblock={},a.prewireblock={},a.aluminiumblock={},a.finishingblock={},a.watertestingblock={},a.weighbridgeblock={},a.detailingblock={},a.qcblock={},a.qcblock1={},a.waterblock={},a.waterblock1={},a.weight_tare={},a.weight_atm={},a.weight_tow_ball={},a.weight_chassis_gtm={},a.weight_gas_comp={},a.weight_payload={},a.finalqcblock={},a.dispatchblock1={},a.dispatchblock2={},a.completeblock={},a.blankblock={},a.dispshowgreen=!1,a.actual_prod_date_loading={},a.chassis_section_date_loading={},a.onChasisSectionCommentLoading={},a.building_date_loading={},a.onBuildingCommentLoading={},a.prewire_date_loading={},a.onPrewireCommentLoading={},a.aluminium_date_loading={},a.finishing_date_loading={},a.watertest_date_loading={},a.weigh_bridge_date_loading={},a.detailing_date_loading={},a.onAluminiumCommentLoading={},a.onFinishingCommentLoading={},a.onWatertestCommentLoading={},a.onWeighBridgeCommentLoading={},a.onDetailingCommentLoading={},a.orderCommentLoading={},a.actual_qc_date_loading={},a.qcCommentLoading={},a.ChassisCommentLoading={},a.prodCommentLoading={},a.actual_water_test_date_loading={},a.waterCommentLoading={},a.detailingCommentLoading={},a.final_qc_date_loading={},a.FinalQCCommentLoading={},a.actual_dispatch_date_loading={},a.dispatchCommentLoading={},a.orderSortLoading={},a.searchStr="",a.statuscolorvar="",a.await_chassis=0,a.await_building=0,a.await_prewire=0,a.await_aluminium=0,a.await_finishing=0,a.await_watertesting=0,a.await_weighbridge=0,a.await_detailing=0,a.dispatched_count=0,a.ready_for_dispatch_count=0,a.final_qc_count=0,a.water_count=0,a.first_qc_count=0,a.monthList=[],a.ordersSelected=[],a.mydate={date:new Date},a.getTodaysDate=new Date,a.sortableOptions={axis:"y",containment:"#transport_dashboard .content table tbody, #transport_dashboard .content table tfoot",forceHelperSize:!0,forcePlaceholderSize:!0,handle:".drag-handle",placeholder:"sortable-placeholder",helper:function e(t,n){var r=n.children(),e=n.clone();return e.children().each(function(e,t){$(t).width(r.eq(e).outerWidth())}),e},stop:function(e,t){var n=(t.item.sortable.index,t.item.sortable.dropindex),r=t.item.sortable.model;if("dropindex"in t.item.sortable){for(var o=void 0,i=n,d=void 0,s=void 0,c=void 0,u=void 0,h=0;h<a.orderList.length;h++){var g=a.orderList[h];if(g.month_header&&(c=g.month,u=h),g.id==r.id){i-=u,o=c,h+1<a.orderList.length&&(s=a.orderList[h+1].id);break}d=g.id}a.orderSortLoading[r.id]=!0,l.updateOrderPosition(a.currentMonth,r,o,i,d,s).then(function(e){a.orderList=e.order_list,a.errorMessages=[]}).catch(function(e){}).finally(function(){a.orderSortLoading[r.id]=!1})}}};var h=s.now();a.currentMonth=new Date(h.getFullYear(),h.getMonth());var g=function(e){a.monthDataLoading=!0,l.getInitialData1(e).then(function(e){a.orderList=e.order_list,a.lockdownMonth=e.lockdown_month,a.lockdownNumber=e.lockdown_number,a.finaltest=new Date,a.calcdate={},a.planqcdate={},a.waterdate={},a.plandispdate={};var t=0;if(a.dispatched_count=0,a.ready_for_dispatch_count=0,a.water_count=0,a.await_chassis=0,a.await_building=0,a.await_prewire=0,a.await_aluminium=0,a.await_finishing=0,a.await_watertesting=0,a.await_weighbridge=0,a.await_detailing=0,a.await_qc_count_red=0,a.await_qc_count_yellow=-1,a.await_water_count_red=0,a.await_water_count_yellow=0,a.final_qc_count=0,angular.forEach(a.orderList,function(e){a.qc_comm_check[e.id]=e.qc_comments_from,a.calcdate[e.id]=e.production_date,a.weight_tare[e.id]=e.weight_tare,a.weight_tow_ball[e.id]=e.weight_tow_ball,a.weight_atm[e.id]=e.weight_atm,a.weight_payload[e.id]=e.weight_payload,a.weight_gas_comp[e.id]=e.weight_gas_comp,a.weight_chassis_gtm[e.id]=e.weight_chassis_gtm,null!=e.actual_production_date?a.testdate=new Date(e.actual_production_date):a.testdate=new Date(e.production_date);var n=(a.testdate,new Date("2020-04-06 0:0:00")),r=new Date("2020-07-01 0:0:00");if(a.testdate<n){a.numberOfDaysToAdd=12,a.busiday=new Date(a.testdate).getDay(),1!=a.busiday&&2!=a.busiday&&3!=a.busiday&&4!=a.busiday||(a.numberOfDaysToAdd=15),5==a.busiday&&(a.numberOfDaysToAdd=17),a.testdate=a.testdate.setDate(a.testdate.getDate()+parseInt(a.numberOfDaysToAdd));var o=new Date(a.testdate);a.planqcdate[e.id]=o,a.testdate1=new Date(a.planqcdate[e.id]),a.numberOfDaysToAdd1=2,a.busiday1=new Date(a.testdate1).getDay(),4!=a.busiday1&&5!=a.busiday1||(a.numberOfDaysToAdd1=4),a.testdate1=a.testdate1.setDate(a.testdate1.getDate()+parseInt(a.numberOfDaysToAdd1));var i=new Date(a.testdate1);a.waterdate[e.id]=i,a.testdate2=new Date(a.waterdate[e.id]),a.numberOfDaysToAdd2=2,a.busiday2=new Date(a.testdate2).getDay(),4!=a.busiday2&&5!=a.busiday2||(a.numberOfDaysToAdd2=4),a.testdate2=a.testdate2.setDate(a.testdate2.getDate()+parseInt(a.numberOfDaysToAdd2));var d=new Date(a.testdate2);a.plandispdate[e.id]=d}else if(a.testdate>n&&a.testdate<r){a.numberOfDaysToAdd=12,a.busiday=new Date(a.testdate).getDay(),1==a.busiday&&(a.numberOfDaysToAdd=24),2==a.busiday&&(a.numberOfDaysToAdd=23),3==a.busiday&&(a.numberOfDaysToAdd=27),4==a.busiday&&(a.numberOfDaysToAdd=27),5==a.busiday&&(a.numberOfDaysToAdd=27),a.testdate=a.testdate.setDate(a.testdate.getDate()+parseInt(a.numberOfDaysToAdd));var o=new Date(a.testdate);a.planqcdate[e.id]=o,a.testdate1=new Date(a.planqcdate[e.id]),a.numberOfDaysToAdd1=2,a.busiday1=new Date(a.testdate1).getDay(),2==a.busiday1&&(a.numberOfDaysToAdd1=2),3==a.busiday1&&(a.numberOfDaysToAdd1=6),4==a.busiday1&&(a.numberOfDaysToAdd1=6),5==a.busiday1&&(a.numberOfDaysToAdd1=4),a.testdate1=a.testdate1.setDate(a.testdate1.getDate()+parseInt(a.numberOfDaysToAdd1));var i=new Date(a.testdate1);a.waterdate[e.id]=i,a.testdate2=new Date(a.waterdate[e.id]),a.numberOfDaysToAdd2=2,a.busiday2=new Date(a.testdate2).getDay(),2==a.busiday2&&(a.numberOfDaysToAdd2=2),3==a.busiday2&&(a.numberOfDaysToAdd2=6),4==a.busiday2,5==a.busiday2&&(a.numberOfDaysToAdd2=4),a.testdate2=a.testdate2.setDate(a.testdate2.getDate()+parseInt(a.numberOfDaysToAdd2));var d=new Date(a.testdate2);a.plandispdate[e.id]=i}else{a.numberOfDaysToAdd=12,a.busiday=new Date(a.testdate).getDay(),1!=a.busiday&&2!=a.busiday&&3!=a.busiday||(a.numberOfDaysToAdd=22),
4!=a.busiday&&5!=a.busiday||(a.numberOfDaysToAdd=25),a.testdate=a.testdate.setDate(a.testdate.getDate()+parseInt(a.numberOfDaysToAdd));var o=new Date(a.testdate);a.planqcdate[e.id]=o,a.plandispdate[e.id]=o}a.plandispdate[e.id]=e.offline_calc_date,console.log(e.id+":"+a.plandispdate[e.id]),a.statuscolorvar="0";var s=new Date(a.calcdate[e.id]+""),l=new Date("2019-09-30 0:0:00"),c=new Date(e.actual_production_date+"");s.setHours(0,0,0,0),null==e.actual_production_date&&(c=null),a.holdblock[e]=!1,s>a.getTodaysDate&&(a.blankblock[e.id]=!0,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.holdblock[e]=!1,a.chassisblock[e.id]=!1,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.dispatchblock1[e.id]=!1,a.qcblock[e.id]=!1,a.qcblock1[e.id]=!1,a.waterblock[e.id]=!1,a.completeblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.statuscolorvar="1"),"1"!=a.statuscolorvar&&e.actual_dispatch_date&&(a.blankblock[e.id]=!1,a.dispatchblock1[e.id]=!1,a.chassisblock[e.id]=!1,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.qcblock[e.id]=!1,a.qcblock1[e.id]=!1,a.waterblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.holdblock[e]=!1,a.completeblock[e.id]=!0,a.statuscolorvar="2",t+=1,a.dispatched_count=parseInt(a.dispatched_count)+1),"1"!=a.statuscolorvar&&"2"!=a.statuscolorvar&&(s>l?(c&&e.actual_qc_date&&e.final_qc_date&&(a.statuscolorvar="3",a.dispatchblock1[e.id]=!0,a.chassisblock[e.id]=!1,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.qcblock[e.id]=!1,a.qcblock1[e.id]=!1,a.holdblock[e]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.waterblock1[e.id]=!1,a.ready_for_dispatch_count=parseInt(a.ready_for_dispatch_count)+1),null==c&&null==e.chassis_section&&null==e.building&&null==e.prewire_section&&null==e.aluminium_date&&null==e.finishing&&null==e.watertest_date&&null==e.detailing_date&&null==e.actual_qc_date&&null==e.final_qc_date&&(a.getTodaysDate.setHours(0,0,0,0),a.getTodaysDate<=s?(a.prodblock1[e.id]=!1,a.prodblock[e.id]=!0,a.chassisblock[e.id]=!1,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.holdblock[e]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="4"):(a.prodblock1[e.id]=!1,a.prodblock1[e.id]=!0,a.chassisblock[e.id]=!1,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="5")),null!=c&&null!=e.chassis_section&&null!=e.building&&null!=e.prewire_section&&null!=e.aluminium_date&&null!=e.finishing&&null!=e.watertest_date&&null!=e.detailing_date&&null!=e.actual_qc_date&&null==e.final_qc_date&&(a.finalqcblock[e.id]=!0,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.chassisblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.qcblock[e.id]=!1,a.qcblock1[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="10",a.final_qc_count=a.final_qc_count+1),null!=c&&null!=e.chassis_section&&null!=e.building&&null!=e.prewire_section&&null!=e.aluminium_date&&null!=e.finishing&&null!=e.watertest_date&&null!=e.detailing_date&&null==e.actual_qc_date&&null==e.final_qc_date&&(a.planqcdate[e.id].setHours(0,0,0,0),a.getTodaysDate.setHours(0,0,0,0),a.getTodaysDate<=a.planqcdate[e.id]?(a.qcblock1[e.id]=!1,a.qcblock[e.id]=!0,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.chassisblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.waterblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="6",a.await_qc_count_red=a.await_qc_count_red+1):(a.qcblock[e.id]=!1,a.qcblock1[e.id]=!0,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.chassisblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.waterblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="7",a.await_qc_count_yellow=a.await_qc_count_yellow+1)),null!=c&&null==e.chassis_section&&null==e.building&&null==e.prewire_section&&null==e.aluminium_date&&null==e.finishing&&null==e.watertest_date&&null==e.detailing_date&&null==e.actual_qc_date&&null==e.final_qc_date&&(a.await_chassis=a.await_chassis+1,a.chassisblock[e.id]=!0,a.prodblock1[e.id]=!1,a.prodblock[e.id]=!1,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="4"),null!=c&&null!=e.chassis_section&&null==e.building&&null==e.prewire_section&&null==e.aluminium_date&&null==e.finishing&&null==e.watertest_date&&null==e.detailing_date&&null==e.actual_qc_date&&null==e.final_qc_date&&(a.await_building=a.await_building+1,a.buildingblock[e.id]=!0,a.prodblock1[e.id]=!1,a.prodblock[e.id]=!1,a.chassisblock[e.id]=!1,a.prewireblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="4"),null!=c&&null!=e.chassis_section&&null!=e.building&&null==e.prewire_section&&null==e.aluminium_date&&null==e.finishing&&null==e.watertest_date&&null==e.detailing_date&&null==e.actual_qc_date&&null==e.final_qc_date&&(a.await_prewire=a.await_prewire+1,a.prewireblock[e.id]=!0,a.prodblock1[e.id]=!1,a.prodblock[e.id]=!1,a.chassisblock[e.id]=!1,a.buildingblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="4"),null!=c&&null!=e.chassis_section&&null!=e.building&&null!=e.prewire_section&&null==e.aluminium_date&&null==e.finishing&&null==e.watertest_date&&null==e.detailing_date&&null==e.actual_qc_date&&null==e.final_qc_date&&(a.await_aluminium=a.await_aluminium+1,a.aluminiumblock[e.id]=!0,a.prodblock1[e.id]=!1,a.prodblock[e.id]=!1,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.chassisblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="4"),null!=c&&null!=e.chassis_section&&null!=e.building&&null!=e.prewire_section&&null!=e.aluminium_date&&null==e.finishing&&null==e.watertest_date&&null==e.detailing_date&&null==e.actual_qc_date&&null==e.final_qc_date&&(a.await_finishing=a.await_finishing+1,a.finishingblock[e.id]=!0,a.prodblock1[e.id]=!1,a.prodblock[e.id]=!1,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.chassisblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="4"),null!=c&&null!=e.chassis_section&&null!=e.building&&null!=e.prewire_section&&null!=e.aluminium_date&&null!=e.finishing&&null==e.watertest_date&&null==e.detailing_date&&null==e.actual_qc_date&&null==e.final_qc_date&&(a.await_detailing=a.await_detailing+1,a.detailingblock[e.id]=!0,a.prodblock1[e.id]=!1,a.prodblock[e.id]=!1,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.chassisblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="4"),null!=c&&null!=e.chassis_section&&null!=e.building&&null!=e.prewire_section&&null!=e.aluminium_date&&null!=e.finishing&&null!=e.detailing_date&&null==e.watertest_date&&null==e.actual_qc_date&&null==e.final_qc_date&&(a.await_watertesting=a.await_watertesting+1,a.watertestingblock[e.id]=!0,a.prodblock1[e.id]=!1,a.prodblock[e.id]=!1,a.buildingblock[e.id]=!1,a.prewireblock[e.id]=!1,a.chassisblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.holdblock[e]=!1,a.statuscolorvar="4")):(null!=e.actual_qc_date&&(a.dispatchblock1[e.id]=!0,a.buildingblock[e.id]=!1,a.chassisblock[e.id]=!1,a.prewireblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.finishingblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.ready_for_dispatch_count=parseInt(a.ready_for_dispatch_count)+1,a.statuscolorvar="11"),"11"!=a.statuscolorvar&&(null==e.actual_qc_date&&(a.planqcdate[e.id].setHours(0,0,0,0),a.getTodaysDate.setHours(0,0,0,0),a.getTodaysDate<=a.planqcdate[e.id]?(a.qcblock1[e.id]=!1,a.qcblock[e.id]=!0,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.statuscolorvar="12",a.await_qc_count_red=a.await_qc_count_red+1):(a.qcblock[e.id]=!1,a.qcblock1[e.id]=!0,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.statuscolorvar="13",a.await_qc_count_yellow=a.await_qc_count_yellow+1)),null!=e.actual_qc_date&&(a.waterdate[e.id].setHours(0,0,0,0),a.getTodaysDate.setHours(0,0,0,0),a.waterdate[e.id]>=a.getTodaysDate?(a.waterblock[e.id]=!0,a.waterblock1[e.id]=!1,a.qcblock[e.id]=!1,a.qcblock1[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.statuscolorvar="14",a.await_water_count_red=a.await_water_count_red+1):(a.waterblock1[e.id]=!0,a.waterblock[e.id]=!1,a.qcblock[e.id]=!1,a.qcblock1[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.prodblock[e.id]=!1,a.prodblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.statuscolorvar="15",a.await_water_count_yellow=a.await_water_count_yellow+1)))),1==e.hold_caravans&&(a.finishingblock[e.id]=!1,a.prodblock1[e.id]=!1,a.prodblock[e.id]=!1,a.buildingblock[e.id]=!1,a.chassisblock[e.id]=!1,a.prewireblock[e.id]=!1,a.watertestingblock[e.id]=!1,a.detailingblock[e.id]=!1,a.aluminiumblock[e.id]=!1,a.qcblock1[e.id]=!1,a.qcblock[e.id]=!1,a.finalqcblock[e.id]=!1,a.completeblock[e.id]=!1,a.blankblock[e.id]=!1,a.waterblock[e.id]=!1,a.waterblock1[e.id]=!1,a.dispatchblock1[e.id]=!1,a.holdblock[e.id]=!0),0==e.hold_caravans&&(a.holdblock[e.id]=!1),a.statuscolorvar="0")}),r.permissions=e.permissions,0==a.monthList.length){var o=!0,s=!1,l=void 0;try{for(var c,h=(0,d.default)(e.month_list);!(o=(c=h.next()).done);o=!0){var g=c.value,p=new Date(Date.parse(g));a.monthList.push({title:n("date")(p,i.FORMAT_DATE_MONTH_SHORT_JS),value:p}),u.isSameMonth(a.currentMonth,p)&&(a.currentMonth=p)}}catch(e){s=!0,l=e}finally{try{!o&&h.return&&h.return()}finally{if(s)throw l}}}}).catch(function(e){}).finally(function(){a.monthDataLoading=!1})},p=function(e){a.monthDataLoading=!0,l.getStatusInitialData().then(function(e){a.chassis_list=e.chassis_list,a.building_list=e.building_list,a.prewire_list=e.prewire_list,a.aluminium_list=e.aluminium_list,a.finishing_list=e.finishing_list,a.water_test_list=e.water_test_list,a.weigh_bridge_list=e.weigh_bridge_list,a.detailing_list=e.detailing_list,a.actual_qc_list=e.actual_qc_list,a.final_qc_list=e.final_qc_list,a.actual_dispatch_list=e.actual_dispatch_list,a.actual_dispatch_list1=e.actual_dispatch_list1,a.email_sent_green_list=e.email_sent_green_list,a.today_dispatched_list=e.today_dispatched_list,a.yesterday_dispatched_list=e.yesterday_dispatched_list,a.this_week_dispatched_list=e.this_week_dispatched_list,a.this_month_dispatched_list=e.this_month_dispatched_list,a.total_count=e.total_count,r.permissions=e.permissions}).catch(function(e){}).finally(function(){a.monthDataLoading=!1})};g(a.currentMonth),p(),$("#chosen_month_show").MonthPicker({Button:!1,MonthFormat:"M yy",SelectedMonth:0,AltFormat:"yy-mm-dd",AltField:"#chosen_month",OnAfterMenuClose:function(){$("#chosen_month").trigger("input")}}),a.$watch("currentMonth",function(e,t){e instanceof Date||(e=new Date(Date.parse(e))),t instanceof Date||(t=new Date(Date.parse(t))),u.isSameMonth(e,t)||g(e)}),a.getStatusClass=function(e){return"plans_completed"==e?"summary_plans_completed":e},a.call_Status=function(){console.log("test this call")},a.getOrderSummarySorted=function(e){var t=Object();return"not_finalized"in e&&(t.not_finalized=e.not_finalized),"pending_draft"in e&&(t.pending_draft=e.pending_draft),"pending_customer"in e&&(t.pending_customer=e.pending_customer),"customer_approved"in e&&(t.customer_approved=e.customer_approved),"plans_completed"in e&&(t.plans_completed=e.plans_completed),t},a.getSpecialFeatureClass=function(e){return u.getSpecialFeatureClass(e)},a.hold_order_fun=function(e){var t=!1;t=0==e.hold_caravans,l.hold_Order(e,t).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while Holding Order #"+e.chassis+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.qcCommentLoading[e.id]=!1})},a.onChasisSectionCommentChange=function(e,t){var r=e.target.value,o=t.chassis_section_comments;r!=o&&(null==o&&""===r||(a.onChasisSectionCommentLoading[t.id]=!0,l.saveChassisOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Chassis  comments for order #"+t.index+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.onChasisSectionCommentLoading[t.id]=!1})))},a.onBuildingCommentChange=function(e,t){var r=e.target.value,o=t.building_comments;r!=o&&(null==o&&""===r||(a.onBuildingCommentLoading[t.id]=!0,l.saveBuildingOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Building comments for order #"+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.onBuildingCommentLoading[t.id]=!1})))},a.onPrewireCommentChange=function(e,t){var r=e.target.value,o=t.prewire_comments;r!=o&&(null==o&&""===r||(a.onPrewireCommentLoading[t.id]=!0,l.savePrewireOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Prewire comments for order #"+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.onPrewireCommentLoading[t.id]=!1})))},a.onAluminiumCommentChange=function(e,t){var r=e.target.value,o=t.chassis_section_comments;r!=o&&(null==o&&""===r||(a.onAluminiumCommentLoading[t.id]=!0,l.saveAluminiumOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Aluminium comments for order # "+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.onAluminiumCommentLoading[t.id]=!1})))},a.onFinishingCommentChange=function(e,t){var r=e.target.value,o=t.finishing_comments;r!=o&&(null==o&&""===r||(a.onFinishingCommentLoading[t.id]=!0,l.saveFinishinOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Finishing comments for order # "+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.onFinishingCommentLoading[t.id]=!1})))},a.onWaterTestCommentChange=function(e,t){var r=e.target.value,o=t.watertest_comments;r!=o&&(null==o&&""===r||(a.onWatertestCommentLoading[t.id]=!0,l.saveWatertestOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Watertest comments for order # "+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.onWatertestCommentLoading[t.id]=!1})))},a.onWeighBridgeCommentChange=function(e,t){var r=e.target.value,o=t.weigh_bridge_comments;r!=o&&(null==o&&""===r||(a.onWeighBridgeCommentLoading[t.id]=!0,l.saveWeighBridgeOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Weigh Bridge comments for order # "+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.onWeighBridgeCommentLoading[t.id]=!1})))},a.onDetailingCommentChange=function(e,t){var r=e.target.value,o=t.detailing_comments;r!=o&&(null==o&&""===r||(a.onDetailingCommentLoading[t.id]=!0,l.saveDetailingOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Detailing comments for order # "+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.onDetailingCommentLoading[t.id]=!1})))},a.onQCCommentChange=function(e,t){var r=e.target.value,o=t.qc_comments_from;r!=o&&(null==o&&""===r||(a.qcCommentLoading[t.id]=!0,l.saveQCOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating QC comments for order #"+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.qcCommentLoading[t.id]=!1})))},a.onProdCommentChange=function(e,t){var r=e.target.value,o=t.prod_comments_from;r!=o&&(null==o&&""===r||(a.prodCommentLoading[t.id]=!0,l.saveProdOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Production comments for order #"+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.prodCommentLoading[t.id]=!1})))},a.onWaterCommentChange=function(e,t){var r=e.target.value,o=t.watertest_comments;r!=o&&(null==o&&""===r||(a.waterCommentLoading[t.id]=!0,l.saveWaterOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Water comments for order #"+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.waterCommentLoading[t.id]=!1})))},a.onFinalQCCommentChange=function(e,t){var r=e.target.value,o=t.final_qc_comments;r!==o&&(null===o&&""===r||(a.FinalQCCommentLoading[t.id]=!0,l.saveFinalQCOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Final QC comments for order #"+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.FinalQCCommentLoading[t.id]=!1})))},a.onDispatchCommentChange=function(e,t){var r=e.target.value,o=t.dispatch_comments;r!=o&&(null==o&&""===r||(a.dispatchCommentLoading[t.id]=!0,l.saveDispatchOnOrder(t,r).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating Dispatch comments for order #"+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){a.dispatchCommentLoading[t.id]=!1})))},a.storeproddate=function(e,t){var r=a.getTodaysDate,o=r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate();l.saveProdDate(t,o).then(function(){a.errorMessages=[]}).catch(function(){a.errorMessages=["Error while updating QC comments for order #"+t.chassis+" for "+n("date")(t.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){})},a.storeqcdate=function(e,t){a.getTodaysDate;a.dispatchCommentLoading[t.id]=!0,l.saveQcDate(t,newValue).then(function(){a.errorMessages=[]}).catch(function(){}).finally(function(){a.dispatchCommentLoading[t.id]=!1})},a.onOrderCommentChange=function(e,t){var n=e.target.value,r=t.schedule_comments;n!=r&&(a.orderCommentLoading[t.id]=!0,l.saveCommentOnOrder(t,n).then(function(){a.errorMessages=[]}).catch(function(){}).finally(function(){a.orderCommentLoading[t.id]=!1}))},a.checkdatefun1=function(e){if(a.getTodaysDate>e.id)return a.watshowgreen=!1,!0},a.checkwaterfun=function(e){a.actual_water_test_date_loading[e.id]=!0;var t=new Date(a.getTodaysDate),r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.saveWaterDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating Water Date for order #"+e.chassis+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(2e3),a.actual_water_test_date_loading[e.id]=!1}),a.actual_water_test_date_loading[e.id]=!1},a.checkfinalqcfun=function(e){a.final_qc_date_loading[e.id]=!0;var t=new Date(a.getTodaysDate),r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.saveFinalQCDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while final QC Date for order #"+e.chassis+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(2e3),a.final_qc_date_loading[e.id]=!1}),a.final_qc_date_loading[e.id]=!1},a.checkdatefun=function(e){a.actual_dispatch_date_loading[e.id]=!0;var t=new Date(a.getTodaysDate),r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.saveDispatchDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating Actual Dispatch Date for order #"+e.chassis+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(2e3),a.actual_dispatch_date_loading[e.id]=!1}),a.actual_dispatch_date_loading[e.id]=!1},a.checkproddate=function(e){a.actual_prod_date_loading[e.id]=!1;var t=new Date(a.getTodaysDate),r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();a.do_datecalc(e,r),setTimeout(2e3);var o=a.plandispdate[e.id].getFullYear()+"-"+(parseInt(a.plandispdate[e.id].getMonth())+1)+"-"+a.plandispdate[e.id].getDate();a.planqcdate[e.id].getFullYear()+"-"+(a.planqcdate[e.id].getMonth()+1)+"-"+a.planqcdate[e.id].getDate(),a.waterdate[e.id].getFullYear()+"-"+(a.waterdate[e.id].getMonth()+1)+"-"+a.waterdate[e.id].getDate();l.saveProdDate(e,r,o).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating Actual Production Date for order #"+e.chassis+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(2e3),a.actual_prod_date_loading[e.id]=!1})},a.checkweights=function(e){if(!(a.weight_tare[e.id]&&a.weight_atm[e.id]&&a.weight_tow_ball[e.id]&&a.weight_chassis_gtm[e.id]&&a.weight_gas_comp[e.id]&&a.weight_payload[e.id]))return a.dispshowgreen=!0,!0},a.checkallweights=function(e){return!!(a.weight_tare[e.id]&&a.weight_atm[e.id]&&a.weight_tow_ball[e.id]&&a.weight_chassis_gtm[e.id]&&a.weight_gas_comp[e.id]&&a.weight_payload[e.id])&&(a.dispshowgreen=!1,!0)},a.checkwaterfun1=function(e){return a.getTodaysDate>e.id?(a.dispshowgreen=!0,!0):(a.dispshowgreen=!1,!1)},a.isSectionDateChanged=function(e){a.chassis_section_date_loading[e.id]=!0;var t=a.getTodaysDate,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.saveChassisDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating Chassis Section Date for order #"+e.chassis+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(1e3),a.chassis_section_date_loading[e.id]=!1}),a.chassis_section_date_loading[e.id]=!1},a.isBuildingDateChanged=function(e){a.building_date_loading[e.id]=!0;var t=a.getTodaysDate,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.saveBuildingDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating Building  Date for order #"+e.chassis+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(1e3),a.building_date_loading[e.id]=!1}),a.building_date_loading[e.id]=!1},a.isPrewireDateChanged=function(e){a.prewire_date_loading[e.id]=!0;var t=a.getTodaysDate,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.savePrewireDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating Prewire Date for order #"+e.chassis+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(1e3),a.prewire_date_loading[e.id]=!1}),a.building_date_loading[e.id]=!1},a.isAluminiumDateChanged=function(e){a.aluminium_date_loading[e.id]=!0;var t=a.getTodaysDate,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.saveAluminiumDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating Aluminium Date for order #"+e.chassis+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(1e3),a.aluminium_date_loading[e.id]=!1}),a.aluminium_date_loading[e.id]=!1},a.isFinishingDateChanged=function(e){a.finishing_date_loading[e.id]=!0;var t=a.getTodaysDate,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.saveFinishingDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating Finishing Date for order #"+e.index+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(1e3),a.finishing_date_loading[e.id]=!1}),a.finishing_date_loading[e.id]=!1},a.isWatertestDateChanged=function(e){a.watertest_date_loading[e.id]=!0;var t=a.getTodaysDate,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.saveWatertestDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating Watertest Date for order #"+e.index+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(1e3),a.watertest_date_loading[e.id]=!1}),a.watertest_date_loading[e.id]=!1},a.isWeighbridgeDateChanged=function(e){a.weigh_bridge_date_loading[e.id]=!0;var t=a.getTodaysDate,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.saveWeighBridgeDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating  Weigh Bridge  Date for order #"+e.index+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(1e3),a.weigh_bridge_date_loading[e.id]=!1}),a.weigh_bridge_date_loading[e.id]=!1},a.isDetailingDateChanged=function(e){a.detailing_date_loading[e.id]=!0;var t=a.getTodaysDate,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();l.saveDetailingDate(e,r).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating  Detailing Date for order #"+e.index+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(1e3),a.detailing_date_loading[e.id]=!1}),a.detailing_date_loading[e.id]=!1},a.isColorOk=function(e){a.actual_qc_date_loading[e.id]=!0;var t=a.getTodaysDate,r=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),o=a.planqcdate[e.id].getFullYear()+"-"+a.planqcdate[e.id].getMonth()+"-"+a.planqcdate[e.id].getDate();console.log(a.plandispdate[e.id]);var d=new Date(a.plandispdate[e.id]),s=(d.getFullYear(),d.getFullYear()+"-"+d.getMonth()+"-"+d.getDate());l.saveQcDate(e,r,o,s).then(function(){a.errorMessages=[],g(a.currentMonth),setTimeout(2e3)}).catch(function(){a.errorMessages=["Error while updating QC Canopy Date for order #"+e.index+" for "+n("date")(e.month,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){setTimeout(1e3),a.actual_qc_date_loading[e.id]=!1}),a.actual_qc_date_loading[e.id]=!1},a.isColorNotOk=function(){a.qcshowgreen=!1},a.do_datecalc=function(e,t){a.waterblock[e.id]=!1,a.planqcdate[e.id]="18-11-2019",a.waterdate[e.id]="20-11-2019",a.plandispdate[e.id]="30-11-2019",a.calcdate[e.id]=t,a.testdate=new Date(a.getTodaysDate);var n=(a.testdate,new Date("2020-04-06 0:0:00"));if(a.testdate<n){a.numberOfDaysToAdd=12,a.busiday=new Date(a.testdate).getDay(),1!=a.busiday&&2!=a.busiday&&3!=a.busiday&&4!=a.busiday||(a.numberOfDaysToAdd=15),5==a.busiday&&(a.numberOfDaysToAdd=17),a.testdate=a.testdate.setDate(a.testdate.getDate()+parseInt(a.numberOfDaysToAdd));var r=new Date(a.testdate);a.planqcdate[qcdate.id]=r,a.testdate1=new Date(a.planqcdate[qcdate.id]),a.numberOfDaysToAdd1=2,a.busiday1=new Date(a.testdate1).getDay(),4!=a.busiday1&&5!=a.busiday1||(a.numberOfDaysToAdd1=4),a.testdate1=a.testdate1.setDate(a.testdate1.getDate()+parseInt(a.numberOfDaysToAdd1));var o=new Date(a.testdate1);a.waterdate[qcdate.id]=o,a.testdate2=new Date(a.waterdate[qcdate.id]),a.numberOfDaysToAdd2=2,a.busiday2=new Date(a.testdate2).getDay(),4!=a.busiday2&&5!=a.busiday2||(a.numberOfDaysToAdd2=4),a.testdate2=a.testdate2.setDate(a.testdate2.getDate()+parseInt(a.numberOfDaysToAdd2));var i=new Date(a.testdate2);a.plandispdate[qcdate.id]=i}else{a.numberOfDaysToAdd=12,a.busiday=new Date(a.testdate).getDay(),1==a.busiday&&(a.numberOfDaysToAdd=24),2==a.busiday&&(a.numberOfDaysToAdd=23),3==a.busiday&&(a.numberOfDaysToAdd=27),4==a.busiday&&(a.numberOfDaysToAdd=27),5==a.busiday&&(a.numberOfDaysToAdd=27),a.testdate=a.testdate.setDate(a.testdate.getDate()+parseInt(a.numberOfDaysToAdd));var r=new Date(a.testdate);a.planqcdate[e.id]=r,a.testdate1=new Date(a.planqcdate[e.id]),a.numberOfDaysToAdd1=2,a.busiday1=new Date(a.testdate1).getDay(),2==a.busiday1&&(a.numberOfDaysToAdd1=2),3==a.busiday1&&(a.numberOfDaysToAdd1=6),4==a.busiday1&&(a.numberOfDaysToAdd1=6),5==a.busiday1&&(a.numberOfDaysToAdd1=4),a.testdate1=a.testdate1.setDate(a.testdate1.getDate()+parseInt(a.numberOfDaysToAdd1));var o=new Date(a.testdate1);a.waterdate[e.id]=o,a.testdate2=new Date(a.waterdate[e.id]),a.numberOfDaysToAdd2=2,a.busiday2=new Date(a.testdate2).getDay(),2==a.busiday2&&(a.numberOfDaysToAdd2=2),3==a.busiday2&&(a.numberOfDaysToAdd2=6),4==a.busiday2&&(a.numberOfDaysToAdd2=6),5==a.busiday2&&(a.numberOfDaysToAdd2=4),a.testdate2=a.testdate2.setDate(a.testdate2.getDate()+parseInt(a.numberOfDaysToAdd2));var i=new Date(a.testdate2);a.plandispdate[e.id]=o}var d=a.getTodaysDate;d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate();a.actual_prod_date_loading[e.id]=!1},a.isSortingAllowed=function(){return a.permissions.view_transport_dashboard},a.hasSequenceChangeInProgress=function(){return!(0,o.default)(a.orderSortLoading).every(function(e){return!e})},a.isSortingAvailable=function(){return!a.searchStr&&!a.hasSequenceChangeInProgress()&&!a.moveCmdInitiated},a.isOrderMovingButtonAvailable=function(){
return!a.hasSequenceChangeInProgress()&&!a.moveCmdInitiated},a.testfilterfun=function(){a.searchStr="Dispatched"},a.filterreadyfordispatch=function(){a.searchStr="Ready For Dispatch"},a.filterchassis=function(){a.searchStr="Chassis"},a.filterbuilding=function(){a.searchStr="Building"},a.filterprewire=function(){a.searchStr="Prewire"},a.filteraluminium=function(){a.searchStr="Aluminium"},a.filterfinishing=function(){a.searchStr="Finishing"},a.filteractualqc=function(){a.searchStr="QC Canopy"},a.filterwatertest=function(){a.searchStr="Water Testing"},a.filterweighbridge=function(){a.searchStr="Weigh Bridge"},a.filterdetailing=function(){a.searchStr="Detailing"},a.filterfinalqc=function(){a.searchStr="Final QC"},a.filterOrders=function(e){return!!e.month_header||(u.containsCaseInsensitive(e.model_series,a.searchStr)||u.containsCaseInsensitive(e.dealership,a.searchStr)||u.containsCaseInsensitive(e.customer,a.searchStr)||u.containsCaseInsensitive(e.chassis,a.searchStr)||u.containsCaseInsensitive(e.order_id,a.searchStr)||u.containsCaseInsensitive(e.order_status,a.searchStr))},a.export_dispatched=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportDispatched(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_ready_dispatch=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportReadyDispatched(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_chassis=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportChassis(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_building=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportBuilding(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_prewire=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportPrewire(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_aluminium=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportAluminium(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_finishing=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportFinishing(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_watertesting=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportWatertesting(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_weighbridge=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportWeighbridge(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_detailing=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportDetailing(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_actualqc=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportActualQc(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_watertest=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportWatertest(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_finalqc=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportFinalQC(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.export_all=function(){var e=new Date(a.currentMonth),t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),r=t+"-"+n;l.exportAll(r).then(function(){a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while exporting the orders. Please reload the page."]}).finally(function(){})},a.assignProductionDates=function(){a.assignProductionDatesLoading=!0,l.assignProductionDates(a.currentMonth).then(function(e){a.orderList=e.order_list,a.errorMessages=[]}).catch(function(e){e?a.errorMessages=[e.data]:a.errorMessages=["Error while updating the orders. Please reload the page."]}).finally(function(){a.assignProductionDatesLoading=!1})},a.onLockdown=function(e,t){l.saveLockdown(e,t).then(function(e){a.errorMessages=[],a.lockdownMonth=e.lockdown_month,a.lockdownNumber=e.lockdown_number}).catch(function(){a.errorMessages=["Error while locking down order #"+t+" for "+n("date")(e,i.FORMAT_DATE_MONTH_SHORT_JS)]}).finally(function(){})},a.onMoveCmd=function(){a.moveCmdInitiated=!0,l.changeOrderScheduleMonthPosition(a.currentMonth,a.move_month,a.new_position,a.ordersSelected).then(function(e){a.orderList=e.order_list,a.errorMessages=[]}).catch(function(e){(e||{}).data}).finally(function(){angular.forEach(a.ordersSelected,function(e){return a.orderSortLoading[e]=!1}),a.moveCmdInitiated=!1}),$("#moveOrderModal").modal("hide")},a.moveOrderCount=function(){var e=0;return angular.forEach(a.orderList,function(t){t.selected&&e++}),e},$("#moveOrderModal.modal").on("hidden.bs.modal",function(){a.moveCmdInitiated||(angular.forEach(a.ordersSelected,function(e){return a.orderSortLoading[e]=!1}),angular.forEach(a.orderList,function(e){e.selected&&(e.selected=!1)}),a.$apply())}),a.moveOrders=function(){a.ordersSelected=[],angular.forEach(a.orderList,function(e,t){e.selected&&(a.ordersSelected.push(e.id),a.orderSortLoading[e.id]=!0)}),a.modalTitle="Move "+a.ordersSelected.length+" Order",a.ordersSelected.length>1&&(a.modalTitle+="s"),$("#moveOrderModal.modal").modal({backdrop:"static",keyboard:!1})},a.lockOrders=function(){a.ordersSelected=[],a.lockCmdInitiated=!0,angular.forEach(a.orderList,function(e,t){e.selected&&a.ordersSelected.push(e.id)}),l.massFinalizeOrder(a.currentMonth,a.ordersSelected).then(function(e){a.orderList=e.order_list,a.errorMessages=[]}).catch(function(e){(e||{}).data?a.errorMessages=[e.data]:a.errorMessages=["Error while updating the orders. Please reload the page."]}).finally(function(){a.lockCmdInitiated=!1})}}])},e.exports=t.default},158:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),i=n(3),d=r(i);t.default=function(e){e.factory("ScheduleTransportDashboardApiService",["ApiService",function(e){var t=function(){function t(){(0,o.default)(this,t)}return(0,d.default)(t,[{key:"assignProductionDates",value:function(t){return e.postData("schedule/transportdashboard2/assign-production-dates",{assign_production_dates_for_month:e.formatDate(t)})}},{key:"changeOrderScheduleMonthPosition",value:function(t,n,r,a){return e.postData("schedule/transportdashboard2/change-order-schedule-month-position",{view_month:e.formatDate(t),order_list:a,new_schedule_month:e.formatDate(n),new_position_month:r})}},{key:"getInitialData",value:function(t){return e.getData("schedule/dashboard2/initialdata/"+e.formatDate(t))}},{key:"getInitialData1",value:function(t){return e.getData("schedule/dashboard2/initialdata/"+e.formatDate(t))}},{key:"getStatusInitialData",value:function(){return e.getData("schedule/dashboard2/production_status/")}},{key:"getDealerInitialData",value:function(t){return e.getData("schedule/transportdashboard2/dealer/"+e.formatDate(t))}},{key:"getStatusData",value:function(t){return e.getData("schedule/dashboard/production_status/"+e.formatDate(t))}},{key:"hold_Order",value:function(t,n){return e.postData("schedule/dashboard2/update-hold-caravans",{order_id:t.id,hold_caravans:n})}},{key:"saveCommentOnOrder",value:function(t,n){return e.postData("schedule/transportdashboard2/update-order",{order_id:t.id,schedule_comments:n})}},{key:"saveChassisOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-chassis-section-comments",{order_id:t.id+"",chassis_section_comments:n})}},{key:"saveBuildingOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-building-comments",{order_id:t.id+"",building_comments:n})}},{key:"savePrewireOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-prewire-comments",{order_id:t.id+"",prewire_comments:n})}},{key:"saveAluminiumOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-aluminium-comments",{order_id:t.id+"",aluminium_comments:n})}},{key:"saveFinishinOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-finishing-comments",{order_id:t.id+"",finishing_comments:n})}},{key:"saveWatertestOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-water-comments",{order_id:t.id+"",watertest_comments:n})}},{key:"saveQCOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-transport-order",{order_id:t.id+"",qc_comments_from:n})}},{key:"saveProdOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-prodcomment-order",{order_id:t.id+"",prod_comments_from:n})}},{key:"saveWaterOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-water-order",{order_id:t.id+"",watertest_comments:n})}},{key:"saveWeighBridgeOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-weigh-bridge-comments",{order_id:t.id+"",weigh_bridge_comments:n})}},{key:"saveDetailingOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-detailing-comments",{order_id:t.id+"",detailing_comments:n})}},{key:"saveFinalQCOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-finalqc-order",{order_id:t.id+"",final_qc_comments:n})}},{key:"saveDispatchOnOrder",value:function(t,n){return e.postData("schedule/dashboard2/update-dispatch-order",{order_id:t.id+"",dispatch_comments:n})}},{key:"saveProdDate",value:function(t,n,r){return e.postData("schedule/dashboard/update-proddate",{order_id:t.id+"",actual_production_date:n,planned_disp_date:r})}},{key:"savePlannedWaterDate",value:function(t,n,r,a){return e.postData("schedule/dashboard2/update-planned-water-date",{order_id:t.id+"",planned_watertest_date:r,planned_qc_date:n,planned_disp_date:a})}},{key:"saveChassisDate",value:function(t,n){return e.postData("schedule/dashboard2/update-chassis-section",{order_id:t.id+"",chassis_section:n})}},{key:"saveAluminiumDate",value:function(t,n){return e.postData("schedule/dashboard2/update-aluminium",{order_id:t.id+"",aluminium:n})}},{key:"saveBuildingDate",value:function(t,n){return e.postData("schedule/dashboard2/update-building",{order_id:t.id+"",building:n})}},{key:"savePrewireDate",value:function(t,n){return e.postData("schedule/dashboard2/update-prewire_section",{order_id:t.id+"",prewire_section:n})}},{key:"saveFinishingDate",value:function(t,n){return e.postData("schedule/dashboard2/update-finishing",{order_id:t.id+"",finishing:n})}},{key:"saveWatertestDate",value:function(t,n){return e.postData("schedule/dashboard2/update-waterdate",{order_id:t.id+"",watertest_date:n})}},{key:"saveWeighBridgeDate",value:function(t,n){return e.postData("schedule/dashboard2/update-weigh-bridge",{order_id:t.id+"",weigh_bridge_date:n})}},{key:"saveDetailingDate",value:function(t,n){return e.postData("schedule/dashboard2/update-detailing",{order_id:t.id+"",detailing_date:n})}},{key:"saveQcDate",value:function(t,n){return e.postData("schedule/dashboard2/update-qcdate",{order_id:t.id+"",actual_qc_date:n})}},{key:"saveWaterDate",value:function(t,n){return e.postData("schedule/dashboard2/update-waterdate",{order_id:t.id+"",actual_watertest_date:n+""})}},{key:"saveFinalQCDate",value:function(t,n){return e.postData("schedule/dashboard2/update-finalqcdate",{order_id:t.id+"",final_qc_date:n+""})}},{key:"saveDispatchDate",value:function(t,n){return e.postData("schedule/dashboard2/update-dispatchdate",{order_id:t.id+"",actual_dispatch_date:n})}},{key:"sendEmailReadyForDispatch",value:function(){return e.postData("schedule/dashboard2/send-ReadyForDispatch",{send_ReadyForDispatch:"send_ReadyForDispatch"})}},{key:"sendEmailActualDispatch",value:function(){return e.postData("schedule/dashboard2/send-ActualDispatch",{send_ActualDispatch:"send_ActualDispatch"})}},{key:"exportDispatched",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/dispatched/"+e+"/"+e}},{key:"exportReadyDispatched",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/pending_for_dispatch/"+e+"/"+e}},{key:"exportChassis",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_chassis/"+e+"/"+e}},{key:"exportBuilding",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_building/"+e+"/"+e}},{key:"exportPrewire",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_prewire/"+e+"/"+e}},{key:"exportAluminium",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_aluminium/"+e+"/"+e}},{key:"exportFinishing",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_finishing/"+e+"/"+e}},{key:"exportWatertesting",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_watertest/"+e+"/"+e}},{key:"exportWeighbridge",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_weighbridge/"+e+"/"+e}},{key:"exportDetailing",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_detailing/"+e+"/"+e}},{key:"exportActualQc",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_qc/"+e+"/"+e}},{key:"exportWatertest",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_water_test/"+e+"/"+e}},{key:"exportFinalQC",value:function(e){window.location="/export/schedule/productiondashboard-csv/2/awaiting_final_qc/"+e+"/"+e}},{key:"exportAll",value:function(e){console.log("all"),window.location="/export/schedule/productiondashboard-csv/2/all/"+e+"/"+e}},{key:"saveDealerCommentOnOrder",value:function(t,n){return e.postData("schedule/transportdashboard2/update-order",{order_id:t.id,dealer_comments:n})}},{key:"saveLockdown",value:function(t,n){return e.postData("schedule/transportdashboard2/update-lockdown",{lockdown_number:n,lockdown_month:t})}},{key:"updateOrderPosition",value:function(t,n,r,a,o,i){return e.postData("schedule/transportdashboard2/update-order",{view_month:e.formatDate(t),order_id:n.id,new_month:r,new_position:a,previous_order_id:o,next_order_id:i})}},{key:"massFinalizeOrder",value:function(t,n){return e.postData("orders/mass-finalize-orders",{view_month:e.formatDate(t),order_list:n})}}]),t}();return new t}])},e.exports=t.default},177:function(e,t,n){"use strict";var r=n(10);n(146)(r),r.config(["$stateProvider","$urlRouterProvider",function(e,t){var r=function(e){var t=new Date,n=new Date(t.getFullYear(),t.getMonth());return e.getObject("scheduleCapacityCurrentMonth")&&(n=new Date(Date.parse(e.getObject("scheduleCapacityCurrentMonth")))),n};t.when("","/dashboard2").when("/capacity2",["$cookies","$state",function(e,t){return t.go("schedule2.capacity",{currentMonth:r(e)},{reload:!0}),!0}]).when("/transportdashboard2",["$cookies","$state",function(e,t){return t.go("schedule2.transportdashboard",{currentMonth:r(e)},{reload:!0}),!0}]),e.state("dealer_dashboard2",{url:"/dealer_dashboard2",template:n(320),controller:"DealerScheduleDashboardController"}).state("schedule2",{abstract:!0,url:"",template:n(323),controller:"ScheduleController"}).state("schedule2.dashboard",{url:"/dashboard2",template:n(319),controller:"ScheduleDashboardController"}).state("schedule2.transportdashboard",{url:"/transportdashboard2",template:n(324),controller:"ScheduleTransportController"}).state("schedule2.statusdashboard",{url:"/statusdashboard2",template:n(325),controller:"ScheduleTransportController"}).state("schedule2.capacity",{url:"/capacity2/{currentMonth:date}",template:n(318),controller:"ScheduleCapacityController",params:{currentMonth:["$cookies",function(e){return r(e)}]}}).state("schedule2.planner",{url:"/planner2",template:n(322),controller:"SchedulePlannerController"}).state("schedule2.export",{url:"/export2",template:n(321),controller:"ScheduleExportController"})}])},318:function(e,t){e.exports='<div id="capacity">\r\n    <top-bar>\r\n        <h2 class="top-bar__title">Pop-Top/Campers Production Capacity</h2>\r\n    </top-bar>\r\n\r\n    <messages></messages>\r\n\r\n    <div class="row header">\r\n        <label>Date range:</label>\r\n        <select ng-model="currentMonth"\r\n            ng-options="month.value as month.title for month in monthList" no-dirty-check></select>\r\n        <bar-spinner ng-if="initialDataLoading"></bar-spinner>\r\n    </div>\r\n\r\n    <div class="row content">\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Date</th>\r\n                    <th>Capacity</th>\r\n                    <th>Type</th>\r\n                    <th ng-if="permissions.change_schedule_capacity"></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr ng-repeat="week in weekList" ng-class-odd="\'odd\'" ng-class-even="\'even\'">\r\n                    <td>{{ week.start_label }} - {{ week.end_label }}</td>\r\n                    <td><strong>{{ week.total_capacity }}</strong></td>\r\n                    <td>\r\n                        <ul>\r\n                            <li ng-repeat="day in week.days" ng-class="day.month_start ? \'month-start\': \'\'">\r\n                                <label>{{ day.label }}</label>\r\n                                <input type="number" ng-model="day.capacity" ng-readonly="!permissions.change_schedule_capacity" />\r\n                                <div>{{ day.month_start }}</div>\r\n                            </li>\r\n                        </ul>\r\n                    </td>\r\n                    <td ng-if="permissions.change_schedule_capacity"><a ng-if="!$last" ng-click="duplicate(week)">Copy to following week</a></td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n\r\n    <div class="row footer">\r\n        <button ng-if="permissions.change_schedule_capacity" class="btn btn-primary btn-lg btn-danger" ng-click="save()">Save changes</button>\r\n        <bar-spinner ng-if="saveLoading"></bar-spinner>\r\n    </div>\r\n</div>'},319:function(e,t){e.exports='<div id="dashboard">\r\n    <top-bar>\r\n        <h2 class="top-bar__title">Pop-Top/Campers Dashboard</h2>\r\n    </top-bar>\r\n\r\n\r\n\r\n    <messages></messages>\r\n\r\n    <div class="row header">\r\n        <div class="col-sm-2">\r\n            <label>Month: </label>\r\n                <input id=\'chosen_month_show\' type="text" class="form-control" />\r\n                <input id=\'chosen_month\' hidden ng-model="currentMonth" no-dirty-check />\r\n            <bar-spinner ng-if="monthDataLoading"></bar-spinner>\r\n        </div>\r\n        <div class="col-sm-5">\r\n            <label>Filter: </label>\r\n            <input ng-model="searchStr" placeholder="Type to filter on Model, Customer, Dealership, Chassis or Comments..." size="60" />\r\n        </div>\r\n\r\n        <div ng-if="permissions.change_schedule_dashboard" class="col-sm-4 pull-right">\r\n            <button ng-click="assignProductionDates()" class="btn btn-primary pull-right">Assign production dates</button>\r\n            <div class="spinner-container"><bar-spinner ng-if="assignProductionDatesLoading"></bar-spinner></div>\r\n        </div>\r\n        <div ng-if="permissions.change_schedule_dashboard" class="col-sm-3 pull-right">\r\n            <button ng-click="moveOrders()" ng-disabled="!moveOrderCount() || !isOrderMovingButtonAvailable() " class="btn btn-primary">Move Orders</button>\r\n            <div class="spinner-container" ng-if="moveCmdInitiated"><bar-spinner></bar-spinner></div>\r\n        </div>\r\n        <div ng-if="permissions.change_schedule_dashboard" class="col-sm-2 pull-right">\r\n            <button ng-click="moveOrders2()" ng-disabled="!moveOrderCount() || !isOrderMovingButtonAvailable() " class="btn btn-primary">Move To Caravans</button>\r\n            <div class="spinner-container" ng-if="moveCmdInitiated"><bar-spinner></bar-spinner></div>\r\n        </div>\r\n        <div ng-if="permissions.finalize_order" class="col-sm-1 pull-right">\r\n            <button ng-click="lockOrders()" ng-disabled="!moveOrderCount()" class="btn btn-primary">Lock Orders</button>\r\n            <div class="spinner-container" ng-if="lockCmdInitiated"><bar-spinner></bar-spinner></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="row content">\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th ng-if="isSortingAllowed()">&nbsp;</th>\r\n                    <th>Sch. No.</th>\r\n                    <th>Production date</th>\r\n                    <th>Chassis</th>\r\n                    <th>Order #</th>\r\n                    <th>Series Code</th>\r\n                    <th>Special</th>\r\n                    <th>Dealership</th>\r\n                    <th>Customer</th>\r\n                    <th>Drafter</th>\r\n                    <th class="comments">Comments</th>\r\n                    <th>VIN No.</th>\r\n                    <th ng-if="permissions.change_schedule_dashboard">Select</th>\r\n                    <th>Manage</th>\r\n                    <th ng-if="permissions.change_schedule_dashboard">Lock</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody ui-sortable="sortableOptions" ng-model="orderList">\r\n                <tr ng-repeat="order in orderList | filter:filterOrders" ng-class-odd="\'odd\'" ng-class-even="\'even\'">\r\n                    <td ng-if="order.month_header && isSortingAllowed()" class="month-header">&nbsp;</td>\r\n                    <td ng-if="order.month_header" class="month-header" colspan="42">\r\n                        {{ order.month_header }}\r\n                        <span class="capacity">\r\n                            <span>Available: {{ order.available }}</span>\r\n                            <span>Taken: {{ order.taken }}</span>\r\n                            <span>Capacity: {{ order.capacity }}</span>\r\n                            <span>Lock down date: {{ order.signoff_date }}</span>\r\n                        </span>\r\n                        <span class="status-summary">\r\n                            Status Summary:\r\n                            <span ng-repeat="(status, value) in getOrderSummarySorted(order.status_summary)" class="{{ getStatusClass(status) }}">{{ value }}</span>\r\n                        </span>\r\n                    </td>\r\n\r\n                    <td ng-if="!order.month_header && isSortingAllowed()" ng-class="isSortingAvailable() ? \'drag-handle\' : \'not-available\'"><i class="glyphicon glyphicon-move"></i></td>\r\n                    <td ng-if="!order.month_header">\r\n                        <i class="glyphicon glyphicon-lock" ng-if="order.month < lockdownMonth || (order.month === lockdownMonth && order.index <= lockdownNumber)"></i>\r\n                        {{ order.index }}\r\n                    </td>\r\n                    <td ng-if="!order.month_header">{{ order.production_date | date: AppSettings.FORMAT_DATE_WEEKDAY_JS }}</td>\r\n                    <td ng-if="!order.month_header" ng-class="order.status">{{ order.chassis }}</td>\r\n                    <td ng-if="!order.month_header" ng-class="order.status">{{ order.order_id }}</td>\r\n                    <td ng-if="!order.month_header">{{ order.model_series }}</td>\r\n                    <td ng-if="!order.month_header"><i class="glyphicon" ng-class="getSpecialFeatureClass(order)"></i></td>\r\n                    <td ng-if="!order.month_header">{{ order.dealership }}</td>\r\n                    <td ng-if="!order.month_header">{{ order.customer }}</td>\r\n                    <td ng-if="!order.month_header">{{ order.drafter }}</td>\r\n                    <td ng-if="!order.month_header" class="comments">\r\n                        <input class="input-comments" type="text" placeholder="Comments..." maxlength="2000"\r\n                               ng-model="order.schedule_comments" ng-blur="onOrderCommentChange($event, order)"\r\n                               ng-model-options="{ updateOn: \'blur\', debounce:0 }"\r\n                               no-dirty-check\r\n                               ng-readonly="!permissions.edit_comments_schedule_dashboard"/>\r\n                        <bar-spinner ng-if="orderCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n                    <td ng-if="!order.month_header">{{ order.vin_number }}</td>\r\n                    <td ng-if="!order.month_header && permissions.change_schedule_dashboard">\r\n                       <input type="checkbox" ng-model="order.selected "/>\r\n                    </td>\r\n                    <td ng-if="!order.month_header"><a href="{{ order.url }}" target="_blank">Manage</a></td>\r\n\r\n                    <td ng-if="!order.month_header && permissions.change_schedule_dashboard">\r\n                        <a href="#" ng-click="onLockdown(order.month, order.index)">Lock</a>\r\n                    </td>\r\n\r\n                    <td ng-if="orderSortLoading[order.id]" class="spinner-container"><bar-spinner></bar-spinner></td>\r\n                </tr>\r\n                <tr class="extra-placeholder"><td colspan="42"></td></tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="modal fade" id="moveOrderModal">\r\n   <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\r\n                        aria-hidden="true">&times;</span></button>\r\n                <h4 class="modal-title modal_title"> {{ modalTitle }} </h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <form name="move_orders_form">\r\n                  <div class="row move_orders">\r\n                    <span class="col-md-4 col-md-offset-2">\r\n                      <label>Schedule Month </label>\r\n                      <select ng-model="move_month"\r\n                              ng-options="month.value as month.title|date: AppSettings.FORMAT_DATE_MONTH_SHORT_JS for month in monthList"\r\n                              no-dirty-check>\r\n                        <option value="">Select</option>\r\n                      </select>\r\n                    </span>\r\n                    <span class="col-md-3">\r\n                      <label> Order Position</label>\r\n                      <input type="number" placeholder="" min="1" max="99999" maxlength="5" ng-model="new_position"/>\r\n                    </span>\r\n                    <span class="col-md-3">\r\n                       \r\n                    </span>\r\n                  </div>\r\n                </form>\r\n\r\n                <div class="alert alert-warning" ng-if="clone.message">{{ clone.message }}</div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" ng-disabled="!(move_month && new_position)" ng-click="onMoveCmd()">Move</button>\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="modal fade" id="moveOrderModal2">\r\n   <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span\r\n                        aria-hidden="true">&times;</span></button>\r\n                <h4 class="modal-title modal_title"> {{ modalTitle }} </h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <form name="move_orders_form1">\r\n                  <div class="row move_orders">\r\n                    <span class="col-md-4 col-md-offset-2">\r\n                      <label>Schedule Month </label>\r\n                      <select ng-model="move_month"\r\n                              ng-options="month.value as month.title|date: AppSettings.FORMAT_DATE_MONTH_SHORT_JS for month in monthList"\r\n                              no-dirty-check>\r\n                        <option value="">Select</option>\r\n                      </select>\r\n                    </span>\r\n                    <span class="col-md-3">\r\n                      <label> Order Position</label>\r\n                    <input type="number" placeholder="" min="1" max="99999" maxlength="5" ng-model="new_position"/>\r\n                    </span>\r\n                    <span class="col-md-3">\r\n                      <label> Caravans</label>\r\n                       <input type="hidden" ng-model="production_unit" value=\'1\' />\r\n                    </span>\r\n                  </div>\r\n                </form>\r\n                <div class="alert alert-warning" ng-if="clone.message">{{ clone.message }}</div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" ng-disabled="!(move_month && new_position)" ng-click="onMoveCmd1()"> Move To Caravans </button>\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n'},320:function(e,t){e.exports='<nav class="navbar navbar-default navbar-content">\r\n        <!-- Brand and toggle get grouped for better mobile display -->\r\n        <div class="navbar-header">\r\n            <span class="navbar-brand">\r\n                <img src="/static/newage/icons/orders.png" />\r\n                Dealer Dashboard -- 2\r\n            </span>\r\n        </div>\r\n</nav>\r\n\r\n<div id="dashboard">\r\n    <top-bar>\r\n        <h2 class="top-bar__title">Dealer Dashboard - II </h2>\r\n    </top-bar>\r\n\r\n    <messages></messages>\r\n\r\n    <div class="row header">\r\n        <div class="col-sm-2">\r\n            <label>Month: </label>\r\n            <select ng-model="currentMonth"\r\n                ng-options="month.value as month.title for month in monthList" no-dirty-check></select>\r\n            <bar-spinner ng-if="monthDataLoading"></bar-spinner>\r\n        </div>\r\n        <div class="col-sm-5">\r\n            <label>Filter: </label>\r\n            <input ng-model="searchStr" placeholder="Type to filter on Model, Customer, or Chassis..." size="60" />\r\n        </div>\r\n    </div>\r\n\r\n    <div class="row content">\r\n        <div class="legend">\r\n          <table>\r\n           <tr>\r\n              <td class="not_finalized highlight"> Not Finalised </td>\r\n              <td class="pending_draft"> To be Drafted </td>\r\n              <td class="customer_approved highlight"> Customer Plan Completed </td>\r\n              <td class="summary_plans_completed"> Plans Completed </td>\r\n           </tr>\r\n          </table>\r\n        </div>\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>Chassis</th>\r\n                    <th>Series Code</th>\r\n                    <th>Special</th>\r\n                    <th>Customer</th>\r\n                    <th>Comment</th>\r\n                    <th>Manage</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody ng-model="orderList">\r\n                <tr ng-repeat="order in orderList | filter:filterOrders" ng-class-odd="\'odd\'" ng-class-even="\'even\'">\r\n                    <td ng-if="order.month_header" class="month-header" colspan="42">\r\n                        {{ order.month_header }}\r\n                        <span class="capacity">\r\n                            <span>Lock down date: {{ order.signoff_date }}</span>\r\n                        </span>\r\n                    </td>\r\n\r\n                    <td ng-if="!order.month_header" ng-class="order.status">{{ order.chassis }}</td>\r\n                    <td ng-if="!order.month_header">{{ order.model_series }}</td>\r\n                    <td ng-if="!order.month_header"><i class="glyphicon" ng-class="getSpecialFeatureClass(order)"></i></td>\r\n                    <td ng-if="!order.month_header">{{ order.customer }}</td>\r\n                    <td ng-if="!order.month_header" class="comments">\r\n                        <input class="input-comments" type="text" placeholder="Comments..." maxlength="2000"\r\n                               ng-model="order.dealer_comments" ng-blur="onOrderDealerCommentChange($event, order)"\r\n                               ng-model-options="{ updateOn: \'blur\', debounce:0 }"\r\n                               ng-readonly="isOrderDealerCommentSaving[order.id]"\r\n                               no-dirty-check\r\n                               />\r\n                        <bar-spinner ng-if="isOrderDealerCommentSaving[order.id]"></bar-spinner>\r\n                    </td>\r\n                    <td ng-if="!order.month_header"><a href="{{ order.url }}" target="_blank">Manage</a></td>\r\n                </tr>\r\n                <tr class="extra-placeholder"><td colspan="42"></td></tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n';
},321:function(e,t){e.exports='<div id="export">\r\n    <top-bar>\r\n        <h2 class="top-bar__title">Pop-Top/Campers Exports</h2>\r\n    </top-bar>\r\n\r\n    <messages></messages>\r\n\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th>Type</th>\r\n                <th>Parameters</th>\r\n                <th>Export</th>\r\n            </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n            <tr>\r\n                <td>Export Series Details as CSV</td>\r\n                <td>\r\n                    <p>With Avereage Tare weight and Ball weight</p>\r\n                </td>\r\n                <td>\r\n                    <a class="btn btn-default" target="_blank"\r\n                            href="/export/schedule/series-avg-csv">\r\n                        Export\r\n                    </a>\r\n                </td>\r\n            </tr>\r\n\r\n            <tr>\r\n                <td>Export Schedule as CSV</td>\r\n                <td>\r\n                    <div class="col-sm-6">\r\n                        <label>Date From: </label>\r\n                        <input id=\'exportScheduleCSV_dateFrom_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV_dateFrom\' hidden ng-model="exportScheduleCSV.dateFrom" no-dirty-check ng-change="validateDates(exportScheduleCSV)" />\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                        <label> Date To: </label>\r\n                        <input id=\'exportScheduleCSV_dateTo_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV_dateTo\' hidden ng-model="exportScheduleCSV.dateTo" no-dirty-check ng-change="validateDates(exportScheduleCSV)" />\r\n                    </div>\r\n                    <div class="text-danger" ng-if="exportScheduleCSV.invalidDates">\r\n                        The start date cannot be greater than the end date.\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV.invalidDates" class="btn btn-default" target="_blank"\r\n                            href="/export/schedule/schedule-csv/2/{{ exportScheduleCSV.dateFrom | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}/{{ exportScheduleCSV.dateTo | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}">\r\n                        Export\r\n                    </a>\r\n                    <button ng-if="exportScheduleCSV.invalidDates" class="btn btn-default" disabled="disabled">Export</button>\r\n                </td>\r\n            </tr>\r\n\r\n            <tr ng-repeat="exp in contractorExports.list">\r\n                <td>{{ exp.name }}</td>\r\n                <td rowspan="{{ contractorExports.list.length }}" ng-if="$first">\r\n                    <div class="col-sm-6">\r\n                        <label>Date From: </label>\r\n                        <input id=\'contractorExports_dateFrom_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'contractorExports_dateFrom\' hidden ng-model="contractorExports.dateFrom" no-dirty-check ng-change="validateDates(contractorExports)" />\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                        <label> Date To: </label>\r\n                        <input id=\'contractorExports_dateTo_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'contractorExports_dateTo\' hidden ng-model="contractorExports.dateTo" no-dirty-check ng-change="validateDates(contractorExports)" />\r\n                    </div>\r\n                    <div class="text-danger" ng-if="contractorExports.invalidDates">\r\n                        The start date cannot be greater than the end date.\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!contractorExports.invalidDates" class="btn btn-default" target="_blank"\r\n                            href="/export/schedule/contractor/2/{{ exp.id }}/{{ contractorExports.dateFrom | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}/{{ contractorExports.dateTo | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}">\r\n                        Export</a>\r\n                    <button ng-if="contractorExports.invalidDates" class="btn btn-default" disabled="disabled">Export</button>\r\n                </td>\r\n            </tr>\r\n\r\n        </tbody>\r\n    </table>\r\n    \r\n    <!-- <top-bar>\r\n        <h2 class="top-bar__title">Production Details Exports</h2>\r\n    </top-bar>\r\n\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th>Type</th>\r\n                <th>Parameters</th>\r\n                <th>Export</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr>\r\n                <td>Export Production Dashboard as CSV</td>\r\n                <td>\r\n                    <div class="col-sm-6">\r\n                        <label>Date From: </label>\r\n                        <input id=\'exportScheduleCSV1_dateFrom_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV1_dateFrom\' hidden ng-model="exportScheduleCSV1.dateFrom" no-dirty-check ng-change="validateDates(exportScheduleCSV1)" />\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                        <label> Date To: </label>\r\n                        <input id=\'exportScheduleCSV1_dateTo_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV1_dateTo\' hidden ng-model="exportScheduleCSV1.dateTo" no-dirty-check ng-change="validateDates(exportScheduleCSV1)" />\r\n                    </div>\r\n                    <div class="text-danger" ng-if="exportScheduleCSV1.invalidDates">\r\n                        The start date cannot be greater than the end date.\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV1.invalidDates" class="btn btn-default" target="_blank"\r\n                            href="/export/schedule/productiondashboard-csv/all/{{ exportScheduleCSV1.dateFrom | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}/{{ exportScheduleCSV1.dateTo | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}">\r\n                        Export\r\n                    </a>\r\n                    <button ng-if="exportScheduleCSV1.invalidDates" class="btn btn-default" disabled="disabled">Export</button>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>Export Production Dashboard\'s Awaiting QC as CSV</td>\r\n                <td>\r\n                    <div class="col-sm-6">\r\n                        <label>Date From: </label>\r\n                        <input id=\'exportScheduleCSV2_dateFrom_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV2_dateFrom\' hidden ng-model="exportScheduleCSV2.dateFrom" no-dirty-check ng-change="validateDates(exportScheduleCSV2)" />\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                        <label> Date To: </label>\r\n                        <input id=\'exportScheduleCSV2_dateTo_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV2_dateTo\' hidden ng-model="exportScheduleCSV2.dateTo" no-dirty-check ng-change="validateDates(exportScheduleCSV2)" />\r\n                    </div>\r\n                    <div class="text-danger" ng-if="exportScheduleCSV2.invalidDates">\r\n                        The start date cannot be greater than the end date.\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV2.invalidDates" class="btn btn-default" target="_blank"\r\n                            href="/export/schedule/productiondashboard-csv/awaiting_qc/{{ exportScheduleCSV2.dateFrom | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}/{{ exportScheduleCSV2.dateTo | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}">\r\n                        Export\r\n                    </a>\r\n                    <button ng-if="exportScheduleCSV2.invalidDates" class="btn btn-default" disabled="disabled">Export</button>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>Export Production Dashboard\'s Awaiting Water Test as CSV</td>\r\n                <td>\r\n                    <div class="col-sm-6">\r\n                        <label>Date From: </label>\r\n                        <input id=\'exportScheduleCSV3_dateFrom_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV3_dateFrom\' hidden ng-model="exportScheduleCSV3.dateFrom" no-dirty-check ng-change="validateDates(exportScheduleCSV3)" />\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                        <label> Date To: </label>\r\n                        <input id=\'exportScheduleCSV3_dateTo_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV3_dateTo\' hidden ng-model="exportScheduleCSV3.dateTo" no-dirty-check ng-change="validateDates(exportScheduleCSV3)" />\r\n                    </div>\r\n                    <div class="text-danger" ng-if="exportScheduleCSV3.invalidDates">\r\n                        The start date cannot be greater than the end date.\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV3.invalidDates" class="btn btn-default" target="_blank"\r\n                            href="/export/schedule/productiondashboard-csv/awaiting_water_test/{{ exportScheduleCSV3.dateFrom | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}/{{ exportScheduleCSV3.dateTo | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}">\r\n                        Export\r\n                    </a>\r\n                    <button ng-if="exportScheduleCSV3.invalidDates" class="btn btn-default" disabled="disabled">Export</button>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>Export Production Dashboard\'s Pending for Dispatch as CSV</td>\r\n                <td>\r\n                    <div class="col-sm-6">\r\n                        <label>Date From: </label>\r\n                        <input id=\'exportScheduleCSV5_dateFrom_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV5_dateFrom\' hidden ng-model="exportScheduleCSV5.dateFrom" no-dirty-check ng-change="validateDates(exportScheduleCSV5)" />\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                        <label> Date To: </label>\r\n                        <input id=\'exportScheduleCSV5_dateTo_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV5_dateTo\' hidden ng-model="exportScheduleCSV5.dateTo" no-dirty-check ng-change="validateDates(exportScheduleCSV5)" />\r\n                    </div>\r\n                    <div class="text-danger" ng-if="exportScheduleCSV4.invalidDates">\r\n                        The start date cannot be greater than the end date.\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV5.invalidDates" class="btn btn-default" target="_blank"\r\n                            href="/export/schedule/productiondashboard-csv/pending_for_dispatch/{{ exportScheduleCSV5.dateFrom | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}/{{ exportScheduleCSV5.dateTo | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}">\r\n                        Export\r\n                    </a>\r\n                    <button ng-if="exportScheduleCSV5invalidDates" class="btn btn-default" disabled="disabled">Export</button>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>Export Production Dashboard\'s Dispatched as CSV</td>\r\n                <td>\r\n                    <div class="col-sm-6">\r\n                        <label>Date From: </label>\r\n                        <input id=\'exportScheduleCSV4_dateFrom_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV4_dateFrom\' hidden ng-model="exportScheduleCSV4.dateFrom" no-dirty-check ng-change="validateDates(exportScheduleCSV4)" />\r\n                    </div>\r\n                    <div class="col-sm-6">\r\n                        <label> Date To: </label>\r\n                        <input id=\'exportScheduleCSV4_dateTo_shown\' type="text" class="form-control" placeholder="loading..." />\r\n                        <input id=\'exportScheduleCSV4_dateTo\' hidden ng-model="exportScheduleCSV4.dateTo" no-dirty-check ng-change="validateDates(exportScheduleCSV4)" />\r\n                    </div>\r\n                    <div class="text-danger" ng-if="exportScheduleCSV4.invalidDates">\r\n                        The start date cannot be greater than the end date.\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV4.invalidDates" class="btn btn-default" target="_blank"\r\n                            href="/export/schedule/productiondashboard-csv/dispatched/{{ exportScheduleCSV4.dateFrom | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}/{{ exportScheduleCSV4.dateTo | date: AppSettings.FORMAT_DATE_MONTH_ISO_JS }}">\r\n                        Export\r\n                    </a>\r\n                    <button ng-if="exportScheduleCSV4invalidDates" class="btn btn-default" disabled="disabled">Export</button>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n\r\n    <br>\r\n\r\n    <top-bar>\r\n        <h2 class="top-bar__title">Production Details Export all or based on Dealership</h2>\r\n    </top-bar>\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th>Type</th>\r\n                <th>Parameters</th>\r\n                <th>Export</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr>\r\n                <td>Export Production Dashboard</td>\r\n            \r\n                <td rowspan="5">    \r\n                    <center> \r\n                        <label for="dealership"> Dealership List: </label>\r\n                        <select id ="dealer">\r\n                            <option value="">--- Select Dealership ---</option>\r\n                            <option ng-repeat="dealer in dealers" value="{{ dealer.id }}">{{ dealer.name }}</option>\r\n                        </select>\r\n                    </center>\r\n                </td>\r\n                    \r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV6.invalidDates" class="btn btn-default" target="_blank" href="" onclick="this.href=\'/export/schedule/productiondashboard_dealership-csv/all/\'+document.getElementById(\'dealer\').value">\r\n                        Export\r\n                    </a>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    Export Production Dashboard\'s Awaiting QC\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV6.invalidDates" class="btn btn-default" target="_blank" href="" onclick="this.href=\'/export/schedule/productiondashboard_dealership-csv/awaiting_qc/\'+document.getElementById(\'dealer\').value">\r\n                        Export\r\n                    </a>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    Export Production Dashboard\'s Awaiting Water Test\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV6.invalidDates" class="btn btn-default" target="_blank" href="" onclick="this.href=\'/export/schedule/productiondashboard_dealership-csv/awaiting_water_test/\'+document.getElementById(\'dealer\').value">\r\n                        Export\r\n                    </a>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    Export Production Dashboard\'s Pending for Dispatch\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV6.invalidDates" class="btn btn-default" target="_blank" href="" onclick="this.href=\'/export/schedule/productiondashboard_dealership-csv/pending_for_dispatch/\'+document.getElementById(\'dealer\').value">\r\n                        Export\r\n                    </a>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    Export Production Dashboard\'s Dispatched\r\n                </td>\r\n                <td>\r\n                    <a ng-if="!exportScheduleCSV6.invalidDates" class="btn btn-default" target="_blank" href="" onclick="this.href=\'/export/schedule/productiondashboard_dealership-csv/dispatched/\'+document.getElementById(\'dealer\').value">\r\n                        Export\r\n                    </a>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table> -->\r\n</div>\r\n'},322:function(e,t){e.exports='<div id="planner">\r\n    <top-bar>\r\n        <h2 class="top-bar__title">Pop-Top/Campers Planner</h2>\r\n    </top-bar>\r\n\r\n    <messages></messages>\r\n\r\n    <table>\r\n        <thead>\r\n            <tr>\r\n                <th>Production Month</th>\r\n                <th>Start Production</th>\r\n                <th>Production capacity</th>\r\n                <th>Month status</th>\r\n                <th>Number of orders</th>\r\n                <th>Lock down date</th>\r\n                <th>Drafting completion</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr ng-repeat="month_data in all_data">\r\n                <td>{{ month_data.production_month | date: AppSettings.FORMAT_DATE_MONTH_JS}}</td>\r\n                <td>\r\n                    <div class="input-group date-group">\r\n                        <input type="text" class="form-control" uib-datepicker-popup="{{ AppSettings.FORMAT_DATE_JS }}" is-open="datepickerState.production_start_date"\r\n                               ng-model="month_data.production_start_date" close-text="Close"\r\n                               datetimepicker-neutral-timezone init-date="month_data.initialValue"\r\n                               ng-readonly="!permissions.change_schedule_planner" />\r\n\r\n                        <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-default" ng-click="datepickerState.production_start_date = true"\r\n                                    ng-disabled="!permissions.change_schedule_planner"><i\r\n                                    class="glyphicon glyphicon-calendar"></i></button>\r\n                        </span>\r\n                    </div>\r\n\r\n                </td>\r\n                <td ng-class="month_data.capacity < month_data.total_orders ? \'alert-danger\' : \'\'">{{ month_data.capacity }}</td>\r\n                <td><label><input type="checkbox" ng-model="month_data.closed" /> Closed</label></td>\r\n                <td ng-class="month_data.capacity < month_data.total_orders ? \'alert-danger\' : \'\'">{{ month_data.total_orders }}</td>\r\n                <td>\r\n                    <div class="input-group date-group" ng-if="!month_data.sign_off_reminder_sent">\r\n                        <input type="text" class="form-control" uib-datepicker-popup="{{ AppSettings.FORMAT_DATE_JS }}" is-open="datepickerState.sign_off_reminder"\r\n                               ng-model="month_data.sign_off_reminder" close-text="Close"\r\n                               datetimepicker-neutral-timezone\r\n                               ng-readonly="!permissions.change_schedule_planner" />\r\n\r\n                        <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-default" ng-click="datepickerState.sign_off_reminder = true"\r\n                                    ng-disabled="!permissions.change_schedule_planner"><i\r\n                                    class="glyphicon glyphicon-calendar"></i></button>\r\n                        </span>\r\n                    </div>\r\n                    <div ng-if="month_data.sign_off_reminder_sent">\r\n                        Email has been sent on {{ month_data.sign_off_reminder | date: AppSettings.FORMAT_DATE_JS }}\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <div class="input-group date-group">\r\n                        <input type="text" class="form-control" uib-datepicker-popup="{{ AppSettings.FORMAT_DATE_JS }}" is-open="datepickerState.draft_completion"\r\n                               ng-model="month_data.draft_completion" close-text="Close"\r\n                               datetimepicker-neutral-timezone\r\n                               ng-readonly="!permissions.change_schedule_planner" />\r\n\r\n                        <span class="input-group-btn">\r\n                            <button type="button" class="btn btn-default" ng-click="datepickerState.draft_completion = true"\r\n                                    ng-disabled="!permissions.change_schedule_planner"><i\r\n                                    class="glyphicon glyphicon-calendar"></i></button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n\r\n    <div class="footer">\r\n        <button ng-if="permissions.change_schedule_planner" class="btn btn-primary btn-lg btn-danger" ng-click="save()">Save changes</button>\r\n    </div>\r\n</div>\r\n'},323:function(e,t){e.exports='<nav class="navbar navbar-default navbar-content">\n        <!-- Brand and toggle get grouped for better mobile display -->\n        <div class="navbar-header">\n            <button type="button"\n                    class="navbar-toggle collapsed"\n                    data-toggle="collapse"\n                    data-target="#bs-example-navbar-collapse-1"\n                    aria-expanded="false">\n                <span class="sr-only">Toggle navigation</span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n                <span class="icon-bar"></span>\n            </button>\n            <span class="navbar-brand">\n                <img src="/static/newage/icons/factory-schedule.png" />\n                Pop-Top/Campers\n                <span class="glyphicon glyphicon-menu-right"></span>\n            </span>\n        </div>\n        <!-- Collect the nav links, forms, and other content for toggling -->\n        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\n            <ul class="nav navbar-nav">\n                <li><a ng-if="permissions.view_schedule_dashboard" ui-sref="schedule2.dashboard">Dashboard</a></li>\n                <li><a ng-if="permissions.view_schedule_dashboard" ui-sref="schedule2.transportdashboard">Production Dashboard</a></li>\n                <li><a ng-if="permissions.view_schedule_dashboard" ui-sref="schedule2.statusdashboard">Production Dashboard - Status</a></li>\n                <li><a ng-if="permissions.view_schedule_capacity" ui-sref="schedule2.capacity">Production Capacity</a></li>\n                <li><a ng-if="permissions.view_schedule_planner" ui-sref="schedule2.planner">Schedule Planner</a></li>\n                <li><a ng-if="permissions.export_schedule" ui-sref="schedule2.export">Export</a></li>\n            </ul>\n        </div><!-- /.navbar-collapse -->\n</nav>\n\n<div ui-view></div>\n\n'},324:function(e,t){e.exports='    \r\n<div id="transport_dashboard">\r\n    <top-bar>\r\n        <h2 class="top-bar__title">Pop-Top/Campers Production Dashboard</h2>\r\n    </top-bar>\r\n\r\n     \r\n\r\n    <messages>{{ order.messages }}</messages>\r\n\r\n    <div class="row header" >\r\n        <div class="col-sm-2">\r\n            <label>Month: </label>\r\n                <input id=\'chosen_month_show\' type="text" class="form-control" />\r\n                <input id=\'chosen_month\' hidden ng-model="currentMonth" no-dirty-check />\r\n            <bar-spinner ng-if="monthDataLoading"></bar-spinner>\r\n        </div>\r\n        <div class="col-sm-2">\r\n            <label>Filter: </label>\r\n            <input ng-model="searchStr" placeholder="Type to filter on Order, Customer, Dealership or Chassis..." size="60" />      \r\n        </div>\r\n\r\n        <div class="col-sm-5 pull-right">\r\n            <label>Status Summary: </label>\r\n            <table border="2" width="50%">               \r\n                <tr>\r\n                    <!-- <th rowspan=3 align=\'center\'> <center> Status <p> Summary</b></th> -->\r\n                    <th align=\'center\'> <a href ng-click="filterchassis()">  <center>  Chassis  </b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="filterbuilding()"> <center>  Building</b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="filterprewire()"> <center>  Pre-Wire</b> </a></th>\r\n                    <th align=\'center\'>  <a href ng-click="filteraluminium()"> <center>  Aluminium / Fit Off </b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="filterfinishing()"><center>  Finishing</b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="filterdetailing()"><center>  Detailing Canopy</b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="filterwatertest()"><center>  Water Testing</b></a></th>\r\n                    \r\n                    <th align=\'center\'><a href ng-click="filteractualqc()"><center>  <b>QC </b> </a></th> \r\n                    <!-- <th align=\'center\'> <a href ng-click="filterwatertest()"> <b> Water Testing </b> </a> </th>  -->\r\n                    <th align=\'center\'> <a href ng-click="filterfinalqc()"> <center> <b> Final QC </b></a> </th> \r\n                    <th align=\'center\'>   <a href ng-click="filterreadyfordispatch()"> <center>  <b> Ready For <br> Dispatch </b> </a></th> \r\n                    <th align=\'center\'> <a href ng-click="testfilterfun()"> <center>  Dispatched </b> </a> </th>\r\n                </tr>\r\n\r\n                <tr>   \r\n                    \r\n                    \r\n                    <td style="background-color:#ffd700" align=\'center\'rowspan="2"> \r\n                    \r\n                     <h4>     <b> {{ await_chassis }} </b>  </h4>\r\n                    </td>   \r\n\r\n                    <td style="background-color:#ffd700" align=\'center\'rowspan="2"> \r\n                    \r\n                     <h4>     <b> {{ await_building }} </b>  </h4>\r\n                    </td>\r\n\r\n                     <td style="background-color:#ffd700" align=\'center\'rowspan="2"> \r\n                    \r\n                     <h4>     <b> {{ await_prewire }} </b>  </h4>\r\n                    </td>   \r\n\r\n                    <td style="background-color:#ffd700" align=\'center\'rowspan="2"> \r\n                    \r\n                     <h4>  <b> {{ await_aluminium }} </b>   </h4>\r\n                    </td>   \r\n                    <td style="background-color:#ffd700" align=\'center\'rowspan="2"> \r\n                    \r\n                     <h4>    <b> {{ await_finishing }} </b>  </h4>\r\n                    </td>\r\n\r\n                    <td style="background-color:#ffd700" align=\'center\'rowspan="2"> \r\n                    \r\n                     <h4>    <b> {{ await_detailing }} </b>  </h4>\r\n                    </td>   \r\n   \r\n                    \r\n                    <td style="background-color:#ffd700" align=\'center\'rowspan="2"> \r\n                    \r\n                     <h4>    <b> {{ await_watertesting }} </b>  </h4>\r\n                    </td>   \r\n                    \r\n                    \r\n                    <td style="background-color:#ffd700" align=\'center\'rowspan="2">\r\n                    \r\n                        <label style="background-color:#ffd700">\r\n                         <h4>  <b> {{ (await_qc_count_red + await_qc_count_yellow) }} </b> </h4>\r\n                        </label>\r\n                    </td>   \r\n                    <!--   \r\n                    <td style="background-color:#ffff17" align=\'center\' rowspan="2"> \r\n                        <h4>   <b> {{ await_water_count_red }}  </b>    </h4>\r\n                    </td>\r\n                    -->\r\n                    <td style="background-color:#FFD700" align=\'center\' rowspan="2"> \r\n                        <h4>  <b>   {{ final_qc_count }}  </b>   </h4>\r\n                    </td> \r\n                    <td style="background-color:#33ff33" align=\'center\'rowspan="2"> \r\n                    \r\n                     <h4><b> <b> {{ ready_for_dispatch_count }} </b>  </h4>\r\n                    </td>   \r\n                    <td style="background-color:#C0C0C0" align=\'center\'rowspan="2">\r\n                      <h4><b> {{ dispatched_count }} </b> </h4>\r\n                       \r\n                    </td>   \r\n                    \r\n                </tr>\r\n                <!--  \r\n                <tr>\r\n                    <td style="background-color:#FF4500" align=\'center\'> \r\n                          <h4>   <b>  {{ await_qc_count_yellow }} </h4></b>  \r\n                    </td> \r\n               \r\n                    <td style="background-color:#FF4500" align=\'center\'> \r\n                    <h4>     <b>  {{ await_water_count_yellow }} </h4></b>   \r\n                    </td> \r\n                \r\n                </tr>          \r\n                -->\r\n                <tr></tr>\r\n                 <tr>                   \r\n                    \r\n                    <th align=\'center\'> <a href ng-click="export_chassis()" target="_blank">  <center>  Export  </b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="export_building()" target="_blank"> <center>  Export</b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="export_prewire()" target="_blank"> <center>  Export</b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="export_aluminium()" target="_blank"> <center>  Export</b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="export_finishing()" target="_blank"><center>  Export</b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="export_detailing()" target="_blank"><center>  Export</b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="export_watertesting()" target="_blank"><center>  Export</b> </a></th>\r\n                    <th align=\'center\'> <a href ng-click="export_actualqc()" target="_blank"><center>  <b>Export  </b> </a></th> \r\n                    <th align=\'center\'> <a href ng-click="export_finalqc()" target="_blank"> <center> <b> Export </b></a> </th> \r\n                    <th align=\'center\'> <a href ng-click="export_ready_dispatch()" target="_blank"> <center>  <b> Export  </b> </a></th> \r\n                    <th align=\'center\'> <a href ng-click="export_dispatched()" target="_blank"> <center>  Export </b> </a> </th>\r\n                </tr>  \r\n                 <tr><th align=\'center\' colspan="12"> <a href ng-click="export_all()" target="_blank"> <center> <b> Export All </b></a> </th> </tr>  \r\n            </table> \r\n        </div>\r\n\r\n        <div class="col-sm-2 pull-right">\r\n            <div class="spinner-container"><bar-spinner ng-if="assignProductionDatesLoading"></bar-spinner></div>\r\n        </div>\r\n        <div class="col-sm-1 pull-right">\r\n            <div class="spinner-container" ng-if="moveCmdInitiated"><bar-spinner></bar-spinner></div>\r\n        </div>\r\n        <div ng-if="permissions.finalize_order" class="col-sm-1 pull-right"> \r\n            <div class="spinner-container" ng-if="lockCmdInitiated"><bar-spinner></bar-spinner></div> \r\n        </div>      \r\n    </div>\r\n    <div class="row content">\r\n        <table>\r\n            <thead>\r\n                <tr ng-if="isSortingAllowed()"> \r\n                    \r\n                    <th>Sch. No.</th>                               <!-- 1 --> \r\n                    <th>Status</th>                                <!-- 22 --> \r\n                    <th>Manage</th>                                 <!-- 21 --> \r\n                   <th>Hold / Release</th>                         <!-- 20 -->\r\n                    <th>Chassis </th>                               <!-- 2 --> \r\n                    <th>Order # </th>                               <!-- 3 --> \r\n                    <th>Series Code</th>                            <!-- 4 --> \r\n                    <th>Dealership</th>                             <!-- 5 --> \r\n                    <th>On-Line Date  </th>               <!-- 6 --> \r\n                    <th>Off-Line Date  </th>               <!-- 6 --> \r\n                    <th>Actual Production  </th>                <!-- 7 --> \r\n                      <!--  <th class="comments"> Production Comments</th>8 --> \r\n                    <th>Chassis  </th>                           <!-- 9 -->\r\n                    <th>Chassis Comments</th>                        <!-- 10 -->\r\n                    <th>Building  </th>                         <!-- 11 -->\r\n                    <th>Building Comments</th>                      <!-- 12 -->\r\n                    <th>Pre-Wire  </th>                         <!-- 12 -->\r\n                    <th>Pre-Wire Comments</th>                      <!-- 14 -->\r\n                    <th>Aluminium / Fit Off </th>                        <!-- 14 -->\r\n                    <th>Aluminium Comments</th>                     <!-- 15 -->\r\n                    <th>Finishing  </th>                        <!-- 16 -->\r\n                    <th>Finishing Comments</th>                     <!-- 17 -->\r\n                   <th>Detailing Canopy </th>                        <!-- 16 -->\r\n                    <th>Detailing Canopy Comments</th>                     <!-- 17 -->\r\n                    <th>Water Test  </th>                        <!-- 16 -->\r\n                    <th>Water Test Comments</th>                     <!-- 17 -->\r\n                    <!-- <th>Planned QC</th>  -->                             <!-- 18 -->\r\n                    <th> QC </th>                             <!-- 19 --> \r\n                    <th> QC Comments</th>                        <!-- 20 --> \r\n                    <!-- Temporarily Disabled as per client request -->\r\n                    <!-- <th>Actual Water Testing </th> -->                 <!-- 21 --> \r\n                    <!-- <th class="comments"> Water Test Comments</th> --> <!-- 22 --> \r\n                    <th>Final QC</th>                               <!-- 23 --> \r\n                    <th class="comments">Final QC Comments</th>     <!-- 24 --> \r\n                    <th>Actual Dispatch</th>                        <!-- 26 --> \r\n                    <th class="comments">Dispatch Comments</th>     <!-- 27 --> \r\n                </tr>\r\n            </thead>\r\n            <tbody ui-sortable="sortableOptions" ng-model="orderList">\r\n         <tr ng-repeat="order in orderList | filter:filterOrders" ng-class-odd="\'odd\'" ng-class-even="\'even\'"> \r\n                <!-- 1 --> \r\n                    <td ng-if="!order.month_header">\r\n                        {{ order.index }} \r\n                    </td>\r\n                    <!-- 22 -->   \r\n                <td ng-if="!order.month_header">     \r\n                        <div ng-show="holdblock[order.id]">\r\n                            <div> \r\n                                <label style="background-color:#ffffff;height:25px" class="item item-text-wrap"> On Hold   </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div ng-show="blankblock[order.id]">\r\n                            <div> \r\n                                <label style="background-color:#ffffff;height:25px" class="item item-text-wrap"> Ready For Production    </label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div ng-show="prodblock[order.id]">\r\n                            <label style="background-color:#ffff17" class="item item-text-wrap"> Awaiting Production    </label>\r\n                        </div>\r\n                        <div ng-show="prodblock1[order.id]">\r\n                            <label style="background-color:#FF4500" class="item item-text-wrap"> Awaiting Production    </label>\r\n                        </div>\r\n\r\n                        <div ng-show="chassisblock[order.id]">\r\n                            <label style="background-color:#FFD700" class="item item-text-wrap">  Chassis      \r\n                            </label>\r\n                        </div>\r\n\r\n                        <div ng-show="buildingblock[order.id]">\r\n                            <label style="background-color:#FFD700" class="item item-text-wrap">  Building     </label>\r\n                        </div>\r\n\r\n                        <div ng-show="prewireblock[order.id]">\r\n                            <label style="background-color:#FFD700" class="item item-text-wrap">  Pre-wire      </label>\r\n                        </div>\r\n\r\n                        <div ng-show="aluminiumblock[order.id]">\r\n                            <label style="background-color:#FFD700" class="item item-text-wrap">  Aluminium / Fit Off    </label>\r\n                        </div>\r\n\r\n                        <div ng-show="finishingblock[order.id]">\r\n                            <label style="background-color:#FFD700" class="item item-text-wrap">  Finishing     </label>\r\n                        </div>\r\n\r\n                        <div ng-show="detailingblock[order.id]">\r\n                        <label style="background-color:#FFD700" class="item item-text-wrap">  Detailing Canopy  </label>\r\n                        </div>\r\n\r\n\r\n                        <div ng-show="watertestingblock[order.id]">\r\n                            <label style="background-color:#FFD700" class="item item-text-wrap">  Water Testing </label>\r\n                        </div>\r\n\r\n\r\n                        <div ng-show="qcblock[order.id]">\r\n                        <label style="background-color:#ffff17" class="item item-text-wrap"> QC </label>\r\n                        </div>\r\n                        <div ng-show="qcblock1[order.id]">\r\n                        <label style="background-color:#FF4500" class="item item-text-wrap"> QC </label>\r\n                        </div>\r\n                         \r\n                        <div ng-show="waterblock[order.id]">\r\n                         <!--   <label style="background-color:#ffff17" class="item item-text-wrap">  Water Testing     </label> -->\r\n                        </div>\r\n\r\n                        <div ng-show="waterblock1[order.id]">\r\n                         <!--   <label style="background-color:#FF4500" class="item item-text-wrap"> Ready For Water Testing     </label> -->\r\n                        </div>\r\n\r\n                        <div ng-show="finalqcblock[order.id]">\r\n                            <label style="background-color:#FFD700" class="item item-text-wrap">  Final QC     </label>\r\n                        </div>\r\n                        \r\n                        <div ng-show="dispatchblock1[order.id]">\r\n                            <label style="background-color:#00FF00" class="item item-text-wrap"> Ready For Dispatch     </label>\r\n                        </div>\r\n                        \r\n                        <div ng-show="completeblock[order.id]">\r\n                            <div> \r\n                                <label style="background-color:#D3D3D3;height:25px" class="item item-text-wrap"> Dispatched    </label>\r\n                            </div>\r\n                        </div>\r\n                    </td>\r\n \r\n                     <!-- 21 -->   \r\n                    <td ng-if="!order.month_header">\r\n                        <a href="{{ order.url }}" target="_blank">Manage </a>\r\n                    </td> \r\n                    <!-- 20 -->    \r\n                    \r\n                    <td ng-if="!order.month_header">\r\n                     \r\n                        <div ng-show="order.hold_caravans==0">\r\n                        <input type="checkbox" id="cb10" ng-model="hold_caravans_cur" name="hold_caravans_cur"   ng-checked="false" ng-change="hold_caravans_cur ? hold_order_fun(order) :  !hold_order_fun(order) "/>\r\n                        <h5>  Hold  </h5> \r\n                        </div>\r\n\r\n                        <div ng-show="order.hold_caravans==1">\r\n                        <input type="checkbox" id="cb11" ng-model="hold_caravans_cur" name="hold_caravans_cur"   ng-checked="true" ng-click="hold_order_fun(order)"/>\r\n                        <h5>  Release   </h5> \r\n                        </div>\r\n                        \r\n                    </td>\r\n                    \r\n               \r\n\r\n                \r\n                <!-- 2 --> \r\n                    <td ng-if="!order.month_header" >\r\n                        {{ order.chassis }}\r\n                    </td>\r\n                <!-- 3 --> \r\n                    <td ng-if="!order.month_header" >\r\n                        {{ order.order_id }}\r\n                    </td>\r\n                <!-- 4 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        {{ order.model_series }}\r\n                    </td>\r\n\r\n                <!-- 5 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        {{ order.dealership }} \r\n                    </td>\r\n                <!-- 6 -->\r\n                    <td ng-if="!order.month_header">\r\n                        {{ order.production_date | date: AppSettings.FORMAT_DATE_WEEKDAY_JS }}\r\n                    </td>\r\n                <!-- 24 -->    \r\n                    <td ng-if="!order.month_header"> \r\n                        <div> {{ order.planned_dispatch_date | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.planned_dispatch_date">\r\n                            {{ plandispdate[order.id] | date : \'dd-MM-yyyy\' }} \r\n                        </div>\r\n                    </td>\r\n\r\n                <!-- 7 --> \r\n                \r\n                    <td ng-if="!order.month_header">\r\n                        <div>\r\n                            {{ order.actual_production_date | date : \'dd-MM-yyyy\' }}\r\n                        </div>\r\n                        <div ng-if="!order.actual_production_date">\r\n                            <input type="checkbox" id=\'actual_prod\'  ng-model="actual_prod" ng-change="actual_prod ? checkproddate(order) : !checkproddate(order)" >  \r\n                            <div ng-show="actual_prod">\r\n                                <label id="lblproddate" name="lblproddate" class="item item-text-wrap">\r\n                                    <h5>{{ getTodaysDate | date :"dd-MM-yyyy" }}</h5>\r\n                                </label>\r\n                            </div>\r\n                        </div>    \r\n                    <bar-spinner ng-if="actual_prod_date_loading[order.id]"></bar-spinner>          \r\n                    </td>\r\n\r\n                <!-- 8 \r\n                    <td ng-if="!order.month_header"> \r\n\r\n                        <input type="text" ng-model="order.prod_comments_from" ng-blur="onProdCommentChange($event, order)"ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.prod_comments_from }}" />\r\n                        <bar-spinner ng-if="prodCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n                -->\r\n                <!-- 9 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        <div > {{ order.chassis_section | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.chassis_section">\r\n                            <input type="checkbox" id=\'chassis_section_chkbox\'  ng-model="chassis_section_chkbox" ng-change="chassis_section_chkbox ? isSectionDateChanged(order) : !isSectionDateChanged(order)" >  \r\n                            <div ng-show="chassis_section">\r\n                                <label id="lblsecdate" name="lblsecdate" class="item item-text-wrap"> \r\n                                    <h5>  {{ getTodaysDate | date :"dd-MM-yyyy" }}  </h5>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <bar-spinner ng-if="chassis_section_date_loading[order.id]"></bar-spinner>               \r\n                    </td>\r\n                <!-- 10 -->    \r\n                    <td ng-if="!order.month_header">                \r\n                        <input type="text" ng-model="order.chassis_section_comments" ng-blur="onChasisSectionCommentChange($event, order)" ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.chassis_section_comments }}" />\r\n                        <bar-spinner ng-if="onChasisSectionCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n\r\n\r\n                <!-- 11 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        <div > {{ order.building | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.building">\r\n                        <input id="building_chkbox" type="checkbox" ng-model="building_chkbox" ng-change="building_chkbox ? isBuildingDateChanged(order) : !isBuildingDateChanged(order)" >  \r\n                            <div ng-show="building">\r\n                                <label id="lblbuilddate" name="lblbuilddate" class="item item-text-wrap"> \r\n                                    <h5>  {{ getTodaysDate | date :"dd-MM-yyyy" }}  </h5>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <bar-spinner ng-if="building_date_loading[order.id]"></bar-spinner>               \r\n                    </td>\r\n                <!-- 12 -->    \r\n                    <td ng-if="!order.month_header">                \r\n                        <input type="text" ng-model="order.building_comments" ng-blur="onBuildingCommentChange($event, order)" ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.building_comments }}" />\r\n                        <bar-spinner ng-if="onBuildingCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n                <!-- 13 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        <div > {{ order.prewire_section | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.prewire_section">\r\n                        <input id="prewire_chkbox" type="checkbox" ng-model="prewire_chkbox" ng-change="prewire_chkbox ? isPrewireDateChanged(order) : !isPrewireDateChanged(order)" >  \r\n                            <div ng-show="prewire_section">\r\n                                <label id="lblprewiredate" name="lblprewiredate" class="item item-text-wrap"> \r\n                                    <h5>  {{ getTodaysDate | date :"dd-MM-yyyy" }}  </h5>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <bar-spinner ng-if="prewire_date_loading[order.id]"></bar-spinner>               \r\n                    </td>\r\n                <!-- 14 -->    \r\n                    <td ng-if="!order.month_header">                \r\n                        <input type="text" ng-model="order.prewire_comments" ng-blur="onPrewireCommentChange($event, order)" ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.prewire_comments }}" />\r\n                        <bar-spinner ng-if="onPrewireCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n                \r\n\r\n                <!-- 9 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        <div > {{ order.aluminium_date | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.aluminium_date">\r\n                            <input id="aluminium_chkbox" type="checkbox"   ng-model="aluminium_chkbox" ng-change="aluminium_chkbox ? isAluminiumDateChanged(order) : !isAluminiumDateChanged()" >  \r\n                            <div ng-show="aluminium_chkbox">\r\n                                <label id="lblaludate" name="lblaludate" class="item item-text-wrap"> \r\n                                    <h5>  {{ getTodaysDate | date :"dd-MM-yyyy" }}  </h5>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <bar-spinner ng-if="aluminium_date_loading[order.id]"></bar-spinner>               \r\n                    </td>\r\n                <!-- 11 -->    \r\n                    <td ng-if="!order.month_header">                \r\n                        <input type="text" ng-model="order.aluminium_comments" ng-blur="onAluminiumCommentChange($event, order)"ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.aluminium_comments }}" />\r\n                        <bar-spinner ng-if="onAluminiumCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n\r\n                <!-- 12 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        <div > {{ order.finishing | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.finishing">\r\n                            <input id=\'finishing_chkbox\' type="checkbox"   ng-model="finishing_chkbox" ng-change="finishing_chkbox ? isFinishingDateChanged(order) : !isFinishingDateChanged()" >  \r\n                            <div ng-show="finishing_chkbox">\r\n                                <label id="lblfindate" name="lblfindate" class="item item-text-wrap"> \r\n                                    <h5>  {{ getTodaysDate | date :"dd-MM-yyyy" }}  </h5>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <bar-spinner ng-if="finishing_date_loading[order.id]"></bar-spinner>               \r\n                    </td>\r\n                <!-- 13 -->    \r\n                    <td ng-if="!order.month_header">                \r\n                        <input type="text" ng-model="order.finishing_comments" ng-blur="onFinishingCommentChange($event, order)"ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.finishing_comments }}" />\r\n                        <bar-spinner ng-if="onFinishingCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n\r\n                    <!-- 18 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        <div > {{ order.detailing_date | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.detailing_date">\r\n                            <input id=\'detailing_chkbox\' type="checkbox"   ng-model="detailing_chkbox" ng-change="detailing_chkbox ? isDetailingDateChanged(order) : !isDetailingDateChanged()" >  \r\n                            <div ng-show="detailing_chkbox">\r\n                                <label id="lbldetailingdate" name="lbldetailingdate" class="item item-text-wrap">\r\n                                    <h5>  {{ getTodaysDate | date :"dd-MM-yyyy" }}  </h5>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <bar-spinner ng-if="detailing_date_loading[order.id]"></bar-spinner>               \r\n                    </td>\r\n                <!-- 19 -->   \r\n\r\n                    <td ng-if="!order.month_header">                \r\n                        <input type="text" ng-model="order.detailing_comments"  \r\n                        ng-blur="onDetailingCommentChange($event, order)"ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.detailing_comments }}" />\r\n                        <bar-spinner ng-if="onDetailingCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n\r\n                    <!-- 14 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        <div > {{ order.watertest_date | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.watertest_date">\r\n                            <input id=\'watertest_chkbox\' type="checkbox"   ng-model="watertest_chkbox" ng-change="watertest_chkbox ? isWatertestDateChanged(order) : !isWatertestDateChanged()" >  \r\n                            <div ng-show="watertest_chkbox">\r\n                                <label id="lblwaterdate" name="lblwaterdate" class="item item-text-wrap"> \r\n                                    <h5>  {{ getTodaysDate | date :"dd-MM-yyyy" }}  </h5>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <bar-spinner ng-if="watertest_date_loading[order.id]"></bar-spinner>               \r\n                    </td>\r\n                <!-- 15 -->    \r\n                    <td ng-if="!order.month_header">                \r\n                        <input type="text" ng-model="order.watertest_comments" ng-blur="onWaterTestCommentChange($event, order)"ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.watertest_comments }}" />\r\n                        <bar-spinner ng-if="onWatertestCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n\r\n                    <!-- 16 -->    \r\n                                                    <!-- 9 -->    \r\n                <!--    <td ng-if="!order.month_header"> \r\n                        <div > {{ order.planned_qc_date | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.planned_qc_date">\r\n                        {{ planqcdate[order.id] | date : \'dd-MM-yyyy\' }} \r\n                        </div> \r\n                    </td>\r\n                -->\r\n                <!-- 20 -->    \r\n                    <td ng-if="!order.month_header">\r\n                    <div >  {{ order.actual_qc_date | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.actual_qc_date">\r\n                            <input type="checkbox" id=\'actual_qc\'  ng-model="actual_qc" ng-change="actual_qc ? isColorOk(order) : isColorNotOk()" >  \r\n                            <div ng-show="actual_qc">\r\n                                <label id="lblqcdate" name="lblqcdate" class="item item-text-wrap"> \r\n                                    <h5>  {{ getTodaysDate | date :"dd-MM-yyyy" }}  </h5>\r\n                                </label>\r\n                            </div>\r\n                        </div>\r\n                        <bar-spinner ng-if="actual_qc_date_loading[order.id]"></bar-spinner>               \r\n                    </td>\r\n                <!-- 21 -->    \r\n                    <td ng-if="!order.month_header">                \r\n                        <input type="text" ng-model="order.qc_comments_from" ng-blur="onQCCommentChange($event, order)"ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.qc_comments_from }}" />\r\n                        <bar-spinner ng-if="qcCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n                             \r\n                \r\n                <!-- 12 -->    \r\n                     \r\n                     \r\n                <!-- 13 -->    \r\n                <!--     <td ng-if="!order.month_header">\r\n                   \r\n                        <div> {{ order.actual_watertest_date | date:\'dd-MM-yyyy\' }} </div>\r\n                   \r\n                        <div ng-if="!order.actual_watertest_date">\r\n    \r\n                            <input id="water_test" type="checkbox" ng-model="water_test" ng-change="water_test ? checkwaterfun(order) : !checkwaterfun(order)">  \r\n                    \r\n                            <div ng-show="water_test">\r\n                                <label class="item item-text-wrap"> \r\n                                    <h5> {{ getTodaysDate | date :"dd-MM-yyyy" }} </h5> \r\n                                </label>\r\n                            <bar-spinner ng-if="actual_water_test_date_loading[order.id]"></bar-spinner> \r\n                            </div>\r\n                        </div>\r\n                    </td>\r\n                -->\r\n                <!-- 14 -->    \r\n                <!-- <td ng-if="!order.month_header">\r\n                        <input type="text" ng-model="order.watertest_comments" ng-blur="onWaterCommentChange($event, order)"ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.watertest_comments }}" />\r\n                        <bar-spinner ng-if="waterCommentLoading[order.id]"></bar-spinner> \r\n                    </td>\r\n                -->\r\n                <!-- 22 -->    \r\n                    <td ng-if="!order.month_header">                  \r\n                        <div > {{ order.final_qc_date | date:\'dd-MM-yyyy\' }} </div>                   \r\n                        \r\n                        <div ng-if = "checkweights(order)">\r\n                        <font face="Arial" color=\'red\'>Set Weights\r\n                        </font>  \r\n                        </div>\r\n                        <div ng-if = "checkallweights(order)"> \r\n                        <div ng-if="!order.final_qc_date">   \r\n                            <input id="final_qc" type="checkbox" ng-model="final_qc" ng-change="final_qc ? checkfinalqcfun(order) : !checkfinalqcfun(order)">  \r\n                            <div ng-show="final_qc">\r\n                                <label class="item item-text-wrap"> \r\n                                    <h5> {{ getTodaysDate | date :"dd-MM-yyyy" }} </h5> \r\n                                </label> \r\n                            </div>                             \r\n                            </div>                          \r\n                        </div>\r\n                        <bar-spinner ng-if="final_qc_date_loading[order.id]"></bar-spinner> \r\n                    </td>\r\n                <!-- 23 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        <input type="text" ng-model="order.final_qc_comments" ng-blur="onFinalQCCommentChange($event, order)" ng-model-options="{ updateOn: \'blur\', debounce:0 }" value=" Hello!" + "{{ order.final_qc_comments }}" />\r\n                        <bar-spinner ng-if="FinalQCCommentLoading[order.id]"></bar-spinner> \r\n                    </td>\r\n\r\n\r\n\r\n                \r\n                <!-- 25 -->    \r\n                    <td ng-if="!order.month_header">\r\n                        <div> {{ order.actual_dispatch_date | date : \'dd-MM-yyyy\' }} </div>\r\n                        <div ng-if="!order.actual_dispatch_date"> \r\n                            <input type="checkbox" ng-model="actual_dispatch" ng-change="actual_dispatch ? checkdatefun(order) : !checkdatefun1(order)"> \r\n                            <div ng-show="actual_dispatch">\r\n                                <label class="item item-text-wrap"  >\r\n                                    <h5> {{ getTodaysDate | date :"dd-MM-yyyy" }} </h5> \r\n                                </label>\r\n                            </div>\r\n                             \r\n                        </div>\r\n                        <bar-spinner ng-if="actual_dispatch_date_loading[order.id]"></bar-spinner> \r\n                    </td>\r\n                    \r\n                    <!-- 26 -->    \r\n                    <td ng-if="!order.month_header" class="comments">\r\n                        <input class="input-comments" type="text" placeholder="Enter Dispatch Comments..." maxlength="2000" ng-model="order.dispatch_comments" ng-blur="onDispatchCommentChange($event, order)"ng-model-options="{ updateOn: \'blur\', debounce:0 }" value="{{ order.dispatch_comments }}"  />\r\n                        <bar-spinner ng-if="dispatchCommentLoading[order.id]"></bar-spinner>\r\n                    </td>\r\n                 \r\n\r\n                    \r\n                    \r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n\r\n\r\n<div class="modal fade" id="moveOrderModal">\r\n   <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n                <h4 class="modal-title modal_title"> {{ modalTitle }} </h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <form name="move_orders_form">\r\n\r\n                    <div class="row move_orders">\r\n                        <span class="col-md-4 col-md-offset-2">\r\n                            <label>Schedule Month </label>\r\n                            <select ng-model="move_month" ng-options="month.value as month.title|date: AppSettings.FORMAT_DATE_MONTH_SHORT_JS for month in monthList"\r\n                              no-dirty-check>\r\n                                <option value="">Select</option>\r\n                            </select>\r\n                        </span>\r\n                        <span class="col-md-3">\r\n                            <label> Order Position</label>\r\n                            <input type="number" placeholder="" min="1" max="99999" maxlength="5" ng-model="new_position"/>\r\n                        </span>\r\n                    </div>\r\n                </form>\r\n\r\n                <div class="alert alert-warning" ng-if="clone.message">{{ clone.message }}</div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" ng-disabled="!(move_month && new_position)" ng-click="onMoveCmd()">Move</button>\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';
},325:function(e,t){e.exports='    \r\n<div id="transport_dashboard">\r\n    <top-bar>\r\n        <h2 class="top-bar__title">Pop-Top/Campers Production Status</h2>\r\n    </top-bar>\r\n\r\n    <messages>{{ order.messages }}</messages>\r\n</div>\r\n\r\n\r\n<div id="transport_dashboard_status">\r\n   \r\n\r\n\r\n\r\n    <div class="content">\r\n        <table style="table-layout:fixed">\r\n            <thead>\r\n                <tr>                    \r\n                    <th style="background-color: #f49e95">Chassis </th>                          \r\n                    <th style="background-color: #82c0ea">Building  </th>                       \r\n                    <th style="background-color: #c3c6c9">Pre-Wire  </th>                      \r\n                    <th style="background-color: #76f4db">Aluminium / <br> Fit Off  </th> \r\n                    <th style="background-color: #d074f4">Finishing  </th>\r\n                    <th style="background-color: #ABB2B9">Detailing Canopy  </th>\r\n                    <th style="background-color: #A9CCE3">Water Testing  </th>\r\n                    <th style="background-color: #5ee796">QC  </th>\r\n                    <th style="background-color: #f9d959">Final QC </th>\r\n                    <th style="background-color: #f2b47f">Ready For Dispatch</th>\r\n                    <th style="background-color: #7ac4f4">Dispatched Today  </th>\r\n                    <th style="background-color: #99abbd">Dispatched Yesterday  </th>\r\n                    <th style="background-color: #a4cfea">Dispatched <br> This Week  </th>\r\n                    <th style="background-color: #c884e5">Dispatched <br> This Month  </th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                <tr>  \r\n                    <th style="background-color: #E6B0AA"> {{ total_count.chassis_count }} </th>\r\n\r\n                    <th style="background-color: #AED6F1"> {{ total_count.building_count }} </th>                          \r\n                    <th style="background-color: #E5E7E9"> {{ total_count.prewire_count }} </th>                          \r\n                    <th style="background-color: #A3E4D7"> {{ total_count.aluminium_count }} </th>                          \r\n                    <th style="background-color: #D2B4DE"> {{ total_count.finishing_count }} </th>                          \r\n                    \r\n                    <th style="background-color: #ABB2B9"> {{ total_count.detailing_count }} </th>\r\n                    \r\n                    <th style="background-color: #A9CCE3"> {{ total_count.water_test_count }} </th>\r\n\r\n                    <th style="background-color: #A9DFBF"> {{ total_count.actual_qc_count }} </th>                          \r\n                    <th style="background-color: #F9E79F"> {{ total_count.final_qc_count }} </th>                          \r\n                    <th style="background-color: #F5CBA7"> {{ total_count.email_sent_green_count }}  </th>                          \r\n                    <th style="background-color: #A9CCE3"> {{ total_count.today_dispatched_count }} </th>                          \r\n                    <th style="background-color: #ABB2B9"> {{ total_count.yesterday_dispatched_count }} </th>                          \r\n                    <th style="background-color: #D4E6F1"> {{ total_count.this_week_dispatched_count }} </th>                          \r\n                    <th style="background-color: #D7BDE2"> {{ total_count.this_month_dispatched_count }} </th>                          \r\n                </tr>\r\n                <tr>\r\n                    <th valign="top" style="background-color: #E6B0AA">\r\n                        <table rules="none">\r\n                            \r\n                            <tbody >\r\n                                <tr ng-repeat="chassis in chassis_list">              \r\n                                    <td>\r\n                                        <a href="{{ chassis.url }}" target="_blank"> {{ chassis.chassis }} </a> \r\n                                    </td>                          \r\n                                </tr>\r\n                            <tbody>\r\n                        </table>\r\n                    </th>  \r\n                \r\n                    <th valign="top" style="background-color: #AED6F1">\r\n                        <table rules="none"> \r\n                           \r\n                            <tbody>\r\n                                <tr ng-repeat="building in building_list">  \r\n                                    <td>\r\n                                        <a href="{{ building.url }}" target="_blank"> {{ building.chassis}} </a> \r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </th>                    \r\n                    \r\n                    <th valign="top" style="background-color: #E5E7E9">\r\n                        <table rules="none"> \r\n                             \r\n                            <tbody>\r\n                                      \r\n                                <tr ng-repeat="prewire in prewire_list">                         \r\n                                    <td>\r\n                                        <a href="{{ prewire.url }}" target="_blank"> {{ prewire.chassis }} </a> \r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </th>                    \r\n\r\n                    <th valign="top" style="background-color: #A3E4D7">\r\n                        <table rules="none">\r\n                            \r\n                            <tbody> \r\n                                <tr ng-repeat="aluminium in aluminium_list">                          \r\n                                    <td> \r\n                                        <a href="{{ aluminium.url }}" target="_blank"> {{ aluminium.chassis }} </a> \r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </th> \r\n\r\n                    <th valign="top" style="background-color: #D2B4DE">\r\n                        <table rules="none">\r\n                         \r\n                        <tbody>\r\n                            <tr ng-repeat="finishing in finishing_list">                         \r\n                                <td>\r\n                                    <a href="{{ finishing.url }}" target="_blank"> {{ finishing.chassis }} </a> \r\n                                </td>\r\n                            </tr>\r\n                        </tbody> \r\n                        </table>\r\n                    </th> \r\n\r\n                    <th valign="top" style="background-color: #ABB2B9">\r\n                        <table rules="none">\r\n                         \r\n                        <tbody>\r\n                            <tr ng-repeat="detailing in detailing_list">                         \r\n                                <td>\r\n                                    <a href="{{ detailing.url }}" target="_blank"> {{ detailing.chassis }} </a> \r\n                                </td>\r\n                            </tr>\r\n                        </tbody> \r\n                        </table>\r\n                    </th> \r\n\r\n                   \r\n                    <th valign="top" style="background-color: #A9CCE3">\r\n                        <table style="table-layout:fixed" >\r\n                        <col style="width:20%">\r\n                        <col style="width:80%">\r\n                        <tbody>\r\n                            <tr ng-repeat="water_test in water_test_list">                         \r\n                            <td>\r\n                                    <div> \r\n                                        <font face="Arial" color="Black"> <b>*</b>  </font>\r\n                                    </div> \r\n                                </td>\r\n                                <td>\r\n                                    <a href="{{ water_test.url }}" target="_blank"> {{ water_test.chassis }} </a> \r\n                                </td>\r\n                            </tr>\r\n                        </tbody> \r\n                        </table>\r\n                    </th>   \r\n                    <th valign=top style="background-color: #A9DFBF"> \r\n                     <table style="table-layout:fixed" >\r\n                                <col style="width:20%">\r\n                                <col style="width:80%">\r\n                            <tbody> \r\n                                <tr ng-repeat="actual_qc in actual_qc_list">                           \r\n                                     <td>\r\n                                    <div ng-if="actual_qc.check_weights"> \r\n                                         <span style=\'font-size:14px;color:green\'>&#xbb;</span>  \r\n                                    </div> \r\n                                    <div ng-if="!actual_qc.check_weights">\r\n                                    <span style=\'font-size:14px;color:red\'>&#xbb;</span>   \r\n                                        <!-- \r\n                                            <font face="Arial" color="Red"><b> *</b> {{ actual_qc.weight_tare }} </font> \r\n                                        -->\r\n                                    </div>\r\n                                    </td>\r\n                                    <td> \r\n                                        <a href="{{ actual_qc.url }}" target="_blank"> {{ actual_qc.chassis }} </a> \r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </th>\r\n\r\n                    <th valign="top" style="background-color: #F9E79F">\r\n                         <table style="table-layout:fixed" >\r\n                                <col style="width:20%">\r\n                                <col style="width:80%">\r\n                            <tbody>  \r\n                                <tr ng-repeat="final_qc in final_qc_list">                          \r\n                                   <td> \r\n                                        <div ng-if="final_qc.check_weights"> \r\n                                            <span style=\'font-size:14px;color:green\'>&#xbb;</span>   \r\n                                    </div> \r\n                                    <div ng-if="!final_qc.check_weights"> \r\n                                        <span style=\'font-size:14px;color:red\'>&#xbb;</span>   \r\n                                    </div>\r\n                                </td>\r\n                                    <td> \r\n                                        <a href="{{ final_qc.url }}" target="_blank"> {{ final_qc.chassis }} </a> \r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </th>\r\n                    \r\n                    <th valign="top" style="background-color: #F5CBA7">\r\n                        <table rules="none" valign="top"> \r\n                            \r\n                            <tbody>\r\n\r\n                                 <tr ng-repeat="email_sent_green in email_sent_green_list" valign="top">                          \r\n                                    <td valign="top">\r\n                                    <div ng-if="email_sent_green.status_red"> \r\n                                                   \r\n\r\n                        <a href="{{ email_sent_green.url }}" style="color:#FF6347;"  target="_blank" >\r\n                                                                   {{ email_sent_green.chassis }} </a>\r\n                                 \r\n                                    </div>\r\n                                 </td>\r\n                                 </tr>   \r\n                                 <tr ng-repeat="email_sent_green in email_sent_green_list" valign="top">\r\n                                    <td>\r\n                                    <div ng-if="email_sent_green.status_green"> \r\n                                                                  \r\n                        <a href="{{ email_sent_green.url }}" style="color:#32CD32;" target="_blank"> \r\n                                                                  {{ email_sent_green.chassis }}\r\n                                                              </a>\r\n                                 \r\n                                    </div>\r\n                                </td>\r\n                                </tr>\r\n\r\n                                <tr ng-repeat="email_sent_green in email_sent_green_list" valign="top">\r\n                                    <td>\r\n                                    <div ng-if="email_sent_green.status_grey"> \r\n                                                                  \r\n                        <a href="{{ email_sent_green.url }}" style="color:#000000;"  target="_blank"> \r\n                                                                  {{ email_sent_green.chassis }}\r\n                                                                   </a> \r\n                                                               \r\n                                 \r\n                                    </div>\r\n\r\n\r\n                                    \r\n\r\n                                \r\n                                    </td>\r\n                                </tr>\r\n\r\n \r\n                                <!-- email_sent_green_list -->\r\n                           \r\n                        </tbody>\r\n                        </table>\r\n                    </th>                     \r\n\r\n                    <th valign="top" style="background-color: #A9CCE3">\r\n                        <table rules="none">\r\n                            \r\n                            <tbody> \r\n                                <tr ng-repeat="today_dispatched in today_dispatched_list">                       \r\n                                    <td> \r\n                                        <a href="{{ today_dispatched.url }}" target="_blank"> {{ today_dispatched.chassis }} </a> \r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </th>                    \r\n\r\n                    <th valign="top" style="background-color: #ABB2B9">\r\n                        <table rules="none">\r\n                            \r\n                            <tbody> \r\n                                <tr ng-repeat="yesterday_dispatched in yesterday_dispatched_list">\r\n                                    <td> \r\n                                        <a href="{{ yesterday_dispatched.url }}" target="_blank"> {{ yesterday_dispatched.chassis }} </a> \r\n                                    </td>\r\n                                </tr>\r\n                            </tbody> \r\n                        </table>\r\n                    </th>                                   \r\n\r\n                    <th valign="top" style="background-color: #D4E6F1">\r\n                        <table rules="none">\r\n                            \r\n                            <tbody> \r\n                                <tr ng-repeat="this_week_dispatched in this_week_dispatched_list">\r\n                                    <td> \r\n                                        <a href="{{ this_week_dispatched.url }}" target="_blank"> {{ this_week_dispatched.chassis }} </a> \r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </th>                    \r\n\r\n                    <th valign="top" style="background-color: #D7BDE2">\r\n                        <table rules="none"> \r\n                            \r\n                            <tbody> \r\n                                <tr ng-repeat="this_month_dispatched in this_month_dispatched_list">\r\n                                    <td>\r\n                                        <a href="{{ this_month_dispatched.url }}" target="_blank"> {{ this_month_dispatched.chassis }} </a> \r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </th>                    \r\n                </tr>\r\n            </tbody>     \r\n        </table> \r\n       \r\n    </div>  \r\n</div>\r\n\r\n\r\n<div class="modal fade" id="moveOrderModal">\r\n   <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                    <span aria-hidden="true">&times;</span>\r\n                </button>\r\n                <h4 class="modal-title modal_title"> {{ modalTitle }} </h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <form name="move_orders_form">\r\n\r\n                    <div class="row move_orders">\r\n                        <span class="col-md-4 col-md-offset-2">\r\n                            <label>Schedule Month </label>\r\n                            <select ng-model="move_month" ng-options="month.value as month.title|date: AppSettings.FORMAT_DATE_MONTH_SHORT_JS for month in monthList"\r\n                              no-dirty-check>\r\n                                <option value="">Select</option>\r\n                            </select>\r\n                        </span>\r\n                        <span class="col-md-3">\r\n                            <label> Order Position</label>\r\n                            <input type="number" placeholder="" min="1" max="99999" maxlength="5" ng-model="new_position"/>\r\n                        </span>\r\n                    </div>\r\n                </form>\r\n\r\n                <div class="alert alert-warning" ng-if="clone.message">{{ clone.message }}</div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-primary" ng-disabled="!(move_month && new_position)" ng-click="onMoveCmd()">Move</button>\r\n                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n    </div>\r\n'}});